<!-- vim:wrap
	DO NOT EDIT! This file is generated automatically!
-->
<!doctype html>
<html lang="cs">
<head>
<meta charset="utf-8">
<title>GenerovÃ¡nÃ­ kÃ³du v M4: Ãºvod</title>
<meta name="author" content="Josef KubÃ­n">
<meta name="generator" content="M4">
<link rel="stylesheet" type="text/css" href="../html/preview.css">
<style>.urs p[id^="m4-toc-"]>a>b{font-weight:normal;margin-right:.6em}.m4-ch,.m4-bh{position:relative}.m4-ch a:first-child+a{margin-right:.4em}.m4-ch>a:first-child,.m4-bh>a:first-child{font-size:.9em;font-weight:normal;left:-1.2em;line-height:normal;position:absolute;text-decoration:none;visibility:hidden;padding-right:.3em}.m4-ch sup:last-child,.m4-bh sup:last-child{visibility:hidden;margin-left:.3em}.m4-ch sup:last-child a,.m4-bh sup:last-child a{text-decoration:none}.m4-ch:hover a:first-child,.m4-ch:hover sup:last-child,.m4-bh:hover a:first-child,.m4-bh:hover sup:last-child{visibility:visible}.m4-hg{border-bottom:1px dotted #000;cursor:help}.m4-note::before{content:"\1f5b9";margin-right:.2em;font-size:1.5em}.urs .m4-note,.urs .m4-info,.urs .m4-excl,.urs .m4-warn{padding-top:.2em;padding-bottom:.4em}.m4-note ul{margin-bottom:0}ol.m4-refs a:first-child{margin-right:.3em;text-decoration:none}p.m4-l2{padding-left:1em}.m4-un{text-decoration:underline}.m4-info::before{content:"\1f6c8";margin-right:.2em;font-size:1.5em}.m4-src{background:#fff;border-radius:4px;position:relative}.m4-src>a{background-color:hsla(0,0%,86%,.5);border-radius:0 4px;border:1px solid #ddd;font-size:.7em;padding:2px 4px;position:absolute;right:0;top:0}.m4-src>pre{background:none;position:relative}.m4-src>code{border-radius:0 4px;border:1px solid #ddd;font-size:.7em;font-weight:bold;padding:2px 4px;position:absolute;right:0;top:0}.m4-src>code a{margin-left:.6em}.m4-src>code>span+a{color:#333}.m4-src>code a+a{font-weight:normal}.m4-src>code::before{content:"git:";margin-right:.1em}.m4-src>code>span{text-decoration:underline dashed;cursor:help}.m4-src ol{font-size:.8em;left:-2em;line-height:1.1;padding:9px 0;position:absolute;top:0}.m4-src ol li{margin:0;width:640px}.m4-src ol li:nth-child(even){background:#f5f5f5}.m4-usc,.m4-root{background:#fff;border-radius:4px;border:1px solid #ddd;color:#333;font-family:monospace,monospace;font-size:.8em;font-weight:bold;line-height:1.1;margin:0 0 11px;padding:8px}.m4-usc a,.m4-root a{color:#333}.m4-root::before{content:"~]# ";font-weight:normal}.m4-usc::before{content:"~]$ ";font-weight:normal}p.m4-l3{padding-left:2em}</style>
</head>
<body class="design-tile layout-article-content">
<div class="urs">
<h2 id="m4-toc">Obsah&nbsp;(<a href="../generating-code-in-m4-introduction/index.html" title="Generating code in M4: introduction">English version</a>)</h2>
<noscript><div title="pro informaci" class="rs-tip-major m4-info">Srozumitelnost ukÃ¡zkovÃ©ho zdrojovÃ©ho kÃ³du zvyÅ¡uje povolenÃ½ JavaScript.</div></noscript>
<p id="m4-toc-uvod"><a href="#m4-uvod"><b>1</b>Ãšvod</a></p>
<p id="m4-toc-priklady-pro-ctenare" class="m4-l2"><a href="#m4-priklady-pro-ctenare"><b>1.1</b>PÅ™Ã­klady pro ÄtenÃ¡Å™e</a></p>
<p id="m4-toc-historie-makro-jazyku"><a href="#m4-historie-makro-jazyku"><b>2</b>Historie makro jazykÅ¯</a></p>
<p id="m4-toc-zaklady-jazyka-m4"><a href="#m4-zaklady-jazyka-m4"><b>3</b>ZÃ¡klady jazyka M4</a></p>
<p id="m4-toc-bezkontextova-gramatika" class="m4-l2"><a href="#m4-bezkontextova-gramatika"><b>3.1</b>BezkontextovÃ¡ gramatika</a></p>
<p id="m4-toc-automaty" class="m4-l2"><a href="#m4-automaty"><b>3.2</b>Automaty</a></p>
<p id="m4-toc-vystupni-fronty" class="m4-l2"><a href="#m4-vystupni-fronty"><b>3.3</b>VÃ½stupnÃ­ fronty</a></p>
<p id="m4-toc-hlavni-pouziti-m4"><a href="#m4-hlavni-pouziti-m4"><b>4</b>HlavnÃ­ pouÅ¾itÃ­ M4</a></p>
<p id="m4-toc-generovani-kodu" class="m4-l2"><a href="#m4-generovani-kodu"><b>4.1</b>GenerovÃ¡nÃ­ kÃ³du</a></p>
<p id="m4-toc-preprocesor" class="m4-l2"><a href="#m4-preprocesor"><b>4.2</b>Preprocesor</a></p>
<p id="m4-toc-predpoklady-pro-zvladnuti-m4"><a href="#m4-predpoklady-pro-zvladnuti-m4"><b>5</b>PÅ™edpoklady pro zvlÃ¡dnutÃ­ M4</a></p>
<p id="m4-toc-zaklady-gramatik" class="m4-l2"><a href="#m4-zaklady-gramatik"><b>5.1</b>ZÃ¡klady gramatik</a></p>
<p id="m4-toc-zaklady-automatu" class="m4-l2"><a href="#m4-zaklady-automatu"><b>5.2</b>ZÃ¡klady automatÅ¯</a></p>
<p id="m4-toc-gnu-make" class="m4-l2"><a href="#m4-gnu-make"><b>5.3</b>(GNU) make</a></p>
<p id="m4-toc-vim" class="m4-l2"><a href="#m4-vim"><b>5.4</b>Vim</a></p>
<p id="m4-toc-talent-a-cas" class="m4-l2"><a href="#m4-talent-a-cas"><b>5.5</b>Talent a Äas</a></p>
<p id="m4-toc-refs"><a href="#m4-refs"><b>6</b>Odkazy</a></p>
<hr>
<p id="m4-toc-priklady-generovani-kodu"><a href="#m4-priklady-generovani-kodu"><b>A</b>PÅ™Ã­klady generovÃ¡nÃ­ kÃ³du</a></p>
<p id="m4-toc-priklady-preprocesoru"><a href="#m4-priklady-preprocesoru"><b>B</b>PÅ™Ã­klady preprocesoru</a></p>
<p id="m4-toc-m4-priklady"><a href="#m4-m4-priklady"><b>C</b>M4 â€“ pÅ™Ã­klady</a></p>
<p id="m4-toc-proc-pouzivat-m4-a-proc-ne"><a href="#m4-proc-pouzivat-m4-a-proc-ne"><b>D</b>ProÄ pouÅ¾Ã­vat M4 a&nbsp;proÄ ne?</a></p>
<!-- article content -->
<h2 id="m4-uvod" class="m4-ch"><a href="#m4-toc-uvod" title="Obsah">â˜°</a><a href="#m4-uvod" title="ğŸ”—">1</a>Ãšvod<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h2>
<p>ÄŒtenÃ¡Å™i tohoto seriÃ¡lu se nauÄÃ­ psÃ¡t skripty pro strojovÃ© generovÃ¡nÃ­ kÃ³du.
StrojovÄ› generovanÃ½ kÃ³d mÅ¯Å¾e bÃ½t libovolnÄ› sloÅ¾itÃ½ a&nbsp;mÅ¯Å¾e obsahovat dalÅ¡Ã­ vnitÅ™nÃ­ zÃ¡vislosti.
VzÃ¡jemnÄ› zÃ¡vislÃ© soubory se sloÅ¾itÃ½m kÃ³dem jsou pro ÄlovÄ›ka jen tÄ›Å¾ce udrÅ¾itelnÃ© v&nbsp;konzistentnÃ­m stavu.
Je uÅ¾ nutnÃ© pouÅ¾Ã­t nÄ›jakÃ½ mechanismus pro generovÃ¡nÃ­ kÃ³du.
GenerovÃ¡nÃ­ kÃ³du provÃ¡dÃ­ nÃ¡stroj urÄenÃ½ pro transformaci textu â€“ <strong>makro procesor</strong>.</p>
<p id="m4-what-is-the-series-about">SeriÃ¡l je zamÄ›Å™en na praktickÃ© pouÅ¾itÃ­ <strong>univerzÃ¡lnÃ­ho makro procesoru M4</strong> (dÃ¡le jen M4) pomocÃ­ malÃ½ch pÅ™Ã­kladÅ¯.
Popisuje takÃ© teoretickÃ½ zÃ¡klad vÅ¡ech implementacÃ­.
CÃ­lem seriÃ¡lu je seznÃ¡mit ÄtenÃ¡Å™e s&nbsp;tÃ­mto <span title="m4 â€“ je program pÅ™Ã­kazovÃ© Å™Ã¡dky" class="m4-hg">nÃ¡strojem</span> a&nbsp;takÃ© programovacÃ­m <span title="M4 â€“ je programovacÃ­ jazyk" class="m4-hg">jazykem</span>.<br>
<a href="#m4-hlavni-pouziti-m4" title="HlavnÃ­ pouÅ¾itÃ­ M4">Na co se pouÅ¾Ã­vÃ¡</a>, jak se v&nbsp;nÄ›m programuje a&nbsp;jakÃ© jsou jeho <a href="#m4-proc-generovat-kod-v-m4" title="ğŸ‘ ProÄ generovat kÃ³d v M4">vÃ½hody</a> a&nbsp;<a href="#m4-proc-se-vyhnout-m4" title="ğŸ‘ ProÄ se vyhnout M4">nevÃ½hody</a>.</p>
<div title="poznÃ¡mka" class="rs-tip-major m4-note">VÃ­cejazyÄnÃ½ seriÃ¡l â€<strong>GenerovÃ¡nÃ­ kÃ³du v M4</strong>â€œ je generovÃ¡n M4 skripty<sup><a href="http://github.com/jkubin/m4root" title="GenerovÃ¡nÃ­ kÃ³du v M4" id="m4-ref1">[1]</a></sup>,
kterÃ© (moÅ¾nÃ¡) usnadnÃ­ psanÃ­ ÄlÃ¡nkÅ¯ a&nbsp;seriÃ¡lÅ¯ pro <a href="https://www.root.cz/" title="Root.cz â€“ informace nejen ze svÄ›ta Linuxu">www.root.cz</a> takÃ© jinÃ½m autorÅ¯m.
VÃ½sledkem seriÃ¡lu je takÃ© sada ukÃ¡zkovÃ½ch skriptÅ¯ pro generovÃ¡nÃ­ kÃ³du.</div>
<p>ÃšvodnÃ­ dÃ­l popisuje zÃ¡kladnÃ­ principy jazyka na jednoduchÃ½ch pÅ™Ã­kladech.
VÅ¡echny pÅ™Ã­klady pouÅ¾Ã­vajÃ­ pÅ™episovacÃ­ pravidla <a href="#m4-bezkontextova-gramatika" title="BezkontextovÃ¡ gramatika">bezkontextovÃ© gramatiky</a>.
PozdÄ›ji se nauÄÃ­me pouÅ¾Ã­vat <a href="#m4-vystupni-fronty" title="VÃ½stupnÃ­ fronty">vÃ½stupnÃ­ fronty</a>,
<a href="#m4-automaty" title="Automaty">automaty</a>, asociativnÃ­ pamÄ›ti, zÃ¡sobnÃ­ky a&nbsp;zÃ¡sobnÃ­kovÃ© automaty.
NauÄÃ­me se takÃ© psÃ¡t <a href="#m4-testovaci-automat" title="TestovacÃ­ automat">testovacÃ­ automaty</a> pro testovÃ¡nÃ­ vstupnÃ­ch dat.</p>
<h3 id="m4-priklady-pro-ctenare" class="m4-ch"><a href="#m4-toc-priklady-pro-ctenare" title="Obsah">â˜°</a><a href="#m4-priklady-pro-ctenare" title="ğŸ”—">1.1</a>PÅ™Ã­klady pro ÄtenÃ¡Å™e<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h3>
<p>PÅ™Ã­klady pro ÄtenÃ¡Å™e tvoÅ™Ã­ komplementÃ¡rnÃ­ ÄÃ¡st seriÃ¡lu a&nbsp;budou do jistÃ© mÃ­ry vytvÃ¡Å™eny na zÃ¡kladÄ› podnÄ›tÅ¯ v&nbsp;diskuzi pod ÄlÃ¡nkem.
Na zaÄÃ¡tku kaÅ¾dÃ©ho dÃ­lu je popsÃ¡na nÄ›jakÃ¡ ÄÃ¡st jazyka M4 doplnÄ›nÃ¡ sadou pÅ™Ã­kladÅ¯ na konci.
KaÅ¾dÃ½ dÃ­l je moÅ¾nÃ© ÄÃ­st v&nbsp;libovolnÃ©m poÅ™adÃ­.</p>
<ul>
<li><a href="#m4-priklady-generovani-kodu" title="PÅ™Ã­klady generovÃ¡nÃ­ kÃ³du">PÅ™Ã­klady generovÃ¡nÃ­ kÃ³du</a></li>
<li><a href="#m4-priklady-preprocesoru" title="PÅ™Ã­klady preprocesoru">PÅ™Ã­klady preprocesoru</a></li>
<li><a href="#m4-m4-priklady" title="M4 â€“ pÅ™Ã­klady">M4 â€“ pÅ™Ã­klady</a></li>
<li><a href="#m4-proc-pouzivat-m4-a-proc-ne" title="ProÄ pouÅ¾Ã­vat M4 a proÄ ne?">ProÄ pouÅ¾Ã­vat M4 a&nbsp;proÄ ne?</a></li>
<li><a href="http://github.com/jkubin/m4root" title="GenerovÃ¡nÃ­ kÃ³du v M4">http://github.com/jkubin/m4root</a> â€“ sloÅ¾itÄ›jÅ¡Ã­ projekt generujÃ­cÃ­ HTML5 tohoto seriÃ¡lu</li>
</ul>
<h2 id="m4-historie-makro-jazyku" class="m4-ch"><a href="#m4-toc-historie-makro-jazyku" title="Obsah">â˜°</a><a href="#m4-historie-makro-jazyku" title="ğŸ”—">2</a>Historie makro jazykÅ¯<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h2>
<p>Makro jazyky byly vynalezeny v&nbsp;dobÄ›, kdy dominoval jazyk symbolickÃ½ch adres â€“ <abbr title="Jazyk SymbolickÃ½ch Adres â€“ assembler">JSA</abbr>.
ZdrojovÃ½ kÃ³d JSA velmi Äasto obsahuje shodnÃ© sekvence instrukcÃ­ odliÅ¡ujÃ­cÃ­ se pouze hodnotami operandÅ¯.
ShodnÃ© sekvence instrukcÃ­ je moÅ¾nÃ© seskupit do jednoho slova, nebo-li <strong>makro instrukce</strong>.
JmÃ©no obvykle popisuje ÃºÄel skrytÃ© sekvence instrukcÃ­.
Makro instrukce se pÅ™eloÅ¾Ã­ makro procesorem na pÅ¯vodnÃ­ sekvenci instrukcÃ­, kterÃ¡ se poslÃ©ze pÅ™eloÅ¾Ã­ do spustitelnÃ©ho strojovÃ©ho kÃ³du.
ProgramovÃ¡nÃ­ v&nbsp;JSA pomocÃ­ makro instrukcÃ­ je jednoduÅ¡Å¡Ã­, rychlejÅ¡Ã­ a&nbsp;mÃ©nÄ› nÃ¡chylnÃ© k&nbsp;lidskÃ½m chybÃ¡m.</p>
<p>PozdÄ›ji byly makro jazyky pouÅ¾ity k&nbsp;rozÅ¡Ã­Å™enÃ­ kompilovanÃ½ch programovacÃ­ch jazykÅ¯, protoÅ¾e umoÅ¾nily psÃ¡t zdrojovÃ½ kÃ³d na vyÅ¡Å¡Ã­ Ãºrovni abstrakce neÅ¾ jakou poskytuje samotnÃ½ programovacÃ­ jazyk.
Rychlost, vÃ½konnost a efektivita sloÅ¾itÃ©ho programovacÃ­ho jazyka niÅ¾Å¡Ã­ ÃºrovnÄ› je zachovÃ¡na dÃ­ky makro jazykÅ¯m.
AvÅ¡ak je dÅ¯leÅ¾itÃ© dobÅ™e rozumÄ›t vÅ¡em vrstvÃ¡m kÃ³du.</p>
<h3 id="m4-gpm-general-purpose-macro-genera" class="m4-bh"><a href="#m4-gpm-general-purpose-macro-genera">ğŸ”—</a>GPM (General Purpose Macro-generator)<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h3>
<p>ZÃ¡kladnÃ­ myÅ¡lenku pÅ™episovÃ¡nÃ­ textovÃ½ch Å™etÄ›zcÅ¯ s&nbsp;argumenty, kterÃ© se pÅ™epÃ­Å¡Ã­ do dalÅ¡Ã­ch rekurzivnÄ› pÅ™episovatelnÃ½ch Å™etÄ›zcÅ¯, pÅ™edstavil
<a href="https://en.wikipedia.org/wiki/Christopher_Strachey" title="Wikipedie"><span class="rs-person">Christopher Strachey</span></a> ve svÃ©m
<abbr title="General Purpose Macro-generator">GPM</abbr><sup><a href="http://dx.doi.org/10.1093/comjnl/8.3.225" title="A&nbsp;General Purpose Macro-generator" id="m4-ref2">[2]</a></sup> v&nbsp;roce 1965.
DalÅ¡Ã­ generace makro procesorÅ¯ M3 a&nbsp;M4 pÅ¯vodnÃ­ <abbr title="General Purpose Macro-generator">GPM</abbr> v&nbsp;podstatÄ› uÅ¾ jen rozÅ¡iÅ™ovaly.
ZÃ¡kladnÃ­ myÅ¡lenka pÅ¯vodnÃ­ho nÃ¡vrhu ale zÅ¯stala stejnÃ¡.</p>
<h3 id="m4-m3" class="m4-bh"><a href="#m4-m3">ğŸ”—</a>M3<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h3>
<p><a href="https://cs.wikipedia.org/wiki/Dennis_Ritchie" title="Wikipedie"><span class="rs-person">Dennis Ritchie</span></a> pÅ™evzal zÃ¡kladnÃ­ myÅ¡lenku <abbr title="General Purpose Macro-generator">GPM</abbr> a&nbsp;napsal vylepÅ¡enÃ½ makro procesor pro generovÃ¡nÃ­ zdrojovÃ©ho kÃ³du programovacÃ­ho jazyka C (1972), kterÃ½ sÃ¡m navrhl.
NovÃ½ <strong class="m4-un">m</strong>akro procesor napsal pro minipoÄÃ­taÄ AP-<strong class="m4-un">3</strong>, odtud jmÃ©no <strong>M3</strong>.
Tento pÅ™Ã­mÃ½ pÅ™edchÅ¯dce souÄasnÃ©ho M4 dokÃ¡zal vÃ½raznÄ› uÅ¡etÅ™it tÄ›Å¾kou a&nbsp;ÄasovÄ› nÃ¡roÄnou prÃ¡ci, ÄÃ­mÅ¾ zaujal vÃ½vojÃ¡Å™e programujÃ­cÃ­ v&nbsp;jinÃ½ch jazycÃ­ch (<abbr title="FORmula TRANslation">FORTRAN</abbr>, <abbr title="COmmon Business-Oriented Language">COBOL</abbr>, <abbr title="Programming Language One">PL/I</abbr>, â€¦).
VÃ½vojÃ¡Å™i upravovali M3 pro tyto jazyky ÄÃ­mÅ¾ ho promÄ›nili na univerzÃ¡lnÄ› pouÅ¾itelnÃ½ makro procesor M4.</p>
<div title="m4 âˆˆ {mnoÅ¾ina nÃ¡strojÅ¯ UNIX-u}" class="rs-tip-major m4-note"><span class="rs-person">Dennis Ritchie</span> byl takÃ© spolutvÅ¯rcem operaÄnÃ­ho systÃ©mu UNIX a&nbsp;proto:<ul>
<li>M4 je minimalistickÃ½ a&nbsp;rychlÃ½, <a href="https://cs.wikipedia.org/wiki/Filosofie_Unixu" title="Filosofie UNIX-u">dÄ›lÃ¡ jednu vÄ›c a&nbsp;tu dÄ›lÃ¡ dobÅ™e</a></li>
<li>vÃ½hradnÄ› spolÃ©hÃ¡ na neinteraktivnÃ­ rozhranÃ­ pÅ™Ã­kazovÃ© Å™Ã¡dky</li>
<li>parametry a&nbsp;zÃ¡vislosti M4 skriptÅ¯ popisuje <code>Makefile</code></li>
<li>znakem <code>#</code> zaÄÃ­nÃ¡ jednoÅ™Ã¡dkovÃ½ komentÃ¡Å™ jako v&nbsp;UNIX-ovÃ©m shell-u</li>
<li>promÄ›nnÃ© <code>$@</code>, <code>$*</code>, <code>$#</code>, <code>$0</code>, <code>$1</code>, <code>$2</code>, â€¦ majÃ­ podobnÃ½ vÃ½znam jako v&nbsp;shell-u</li>
<li>oddÄ›lovaÄ argumentÅ¯ je ÄÃ¡rka</li>
</ul>
</div>
<p>Makro procesor M3 rozÅ¡Ã­Å™il takÃ© <span class="rs-person">Jim E. Weythman</span>, autor programovÃ© konstrukce, kterÃ¡ se pouÅ¾Ã­vÃ¡ tÃ©mÄ›Å™ v&nbsp;kaÅ¾dÃ©m M4 skriptu:</p>
<div class="m4-src"><pre id="m4-common-code">divert(-1)
â€¦
define(â€¦)
â€¦
divert(0)dnl
â€¦</pre><a href="#m4-common-code">ğŸ”—</a></div>
<div title="poznÃ¡mka" class="rs-tip-major m4-note">KlÃ­ÄovÃ© slovo <code title="divert(-1), divert(0), divert(1), â€¦, divert(2147483647)" class="m4-hg" data-id="m4-common-code" data-ln="1,5">divert(<a href="https://cs.wikipedia.org/wiki/Cel%C3%A9_%C4%8D%C3%ADslo" title="celÃ© ÄÃ­slo">â„¤</a>)</code> pÅ™epÃ­nÃ¡ vÃ½stupnÃ­ fronty.
Argument <code>-1</code> zcela vypne jakÃ½koliv textovÃ½ vÃ½stup.
Argument <code>0</code> pÅ™epne vÃ½stup na <code>stdout</code> (standardnÃ­ vÃ½stup).</div>
<h3 id="m4-m4" class="m4-bh"><a href="#m4-m4">ğŸ”—</a>M4<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h3>
<p><a href="https://cs.wikipedia.org/wiki/Brian_Kernighan" title="Wikipedie"><span class="rs-person">Brian Kernighan</span></a> makro procesor M3 rozÅ¡Ã­Å™il na <a href="https://cs.wikipedia.org/wiki/Preprocesor" title="Wikipedie">preprocesor</a> jazyka FORTRAN 66,
aby mohl vytvoÅ™it hybridnÃ­ jazykovou nadstavbu pojmenovanou <abbr title="RATional FORtran"><strong>RATFOR</strong></abbr><sup><a href="https://wolfram.schneider.org/bsd/7thEdManVol2/ratfor/ratfor.pdf" title="RATFOR â€” A Preprocessor for a Rational Fortran" id="m4-ref3">[3]</a></sup>.
ZÃ¡kladnÃ­ programovÃ© konstrukce tÃ©to nadstavby (podmÃ­nky, cykly) jsou stejnÃ© jako v&nbsp;jazyce C.
ProgramovÃ¡nÃ­ v&nbsp;RATFOR-u se tak podobÃ¡ programovÃ¡nÃ­ v&nbsp;â€cÃ©Äkuâ€œ.
Makro procesor zdrojovÃ½ kÃ³d pÅ™eklÃ¡dÃ¡ zpÃ¡tky do FORTRAN-u, potÃ© kompilÃ¡tor provede pÅ™eklad do strojovÃ©ho kÃ³du.</p>
<div title="jazyk M4 doplÅˆuje jazyk C" class="rs-tip-major m4-note">VÅ¡imnÄ›te si <a href="#m4-ba-preprocesor-jazyka-c-a-m4" title="`' Preprocesor jazyka C a M4">tÃ©mÄ›Å™ dokonalÃ© symbiÃ³zy</a> s&nbsp;jazykem C<ul>
<li>direktivy <abbr title="Preprocesor jazyka C">CPP</abbr> <code>#define</code>, <code>#include</code>, <code>#ifdef</code>, â€¦ jsou pro M4 komentÃ¡Å™e</li>
<li>klÃ­ÄovÃ¡ slova oddÄ›lenÃ¡ od zÃ¡vorek mezerou, ztrÃ¡cÃ­ svÅ¯j pÅ¯vodnÃ­ vÃ½znam
<ul>
<li>M4 napÅ™Ã­klad ignoruje funkci <code>void define (char c, int i) {â€¦}</code></li>
</ul></li>
<li>argumenty maker oddÄ›lujÃ­ ÄÃ¡rky stejnÄ› jako argumenty funkcÃ­ jazyka&nbsp;C
<ul>
<li>je-li definovÃ¡no makro <code>FUNC(char c, int i)</code>, jeho promÄ›nnÃ© jsou:<br>
<code>$# â†’ 2</code>, <code>$0 â†’ FUNC</code>, <code>$1 â†’ char c</code>, <code>$2 â†’ int i</code>
</li>
</ul></li>
<li><strong>levÃ½</strong> <a href="#m4-rizeni-expanze-neterminalu" title="Å˜Ã­zenÃ­ expanze neterminÃ¡lÅ¯">Å™Ã­dÃ­cÃ­ znak</a> <code>`</code> pro neterminÃ¡ly nenÃ­ souÄÃ¡stÃ­ syntaxe rodiny jazykÅ¯&nbsp;C</li>
<li><strong>pravÃ½</strong> Å™Ã­dÃ­cÃ­ znak <code>'</code> nevadÃ­, nenÃ­-li souÄÃ¡stÃ­ makra
<ul><li>oba Å™Ã­dÃ­cÃ­ znaky lze skrÃ½t do uÅ¾ivatelsky definovanÃ½ch maker <code>LQ()</code>, <code>RQ()</code></li></ul></li>
<li>makra se pÃ­Å¡Ã­ <code>VELKYMI_PISMENY</code>, stejnÄ› jako <a href="https://cs.wikipedia.org/wiki/Termin%C3%A1ln%C3%AD_a_netermin%C3%A1ln%C3%AD_symbol" title="Wikipedie">neterminÃ¡lnÃ­ symboly</a>
<ul><li>tÃ­m je vymezen jejich jmennÃ½ prostor</li></ul></li>
</ul>
</div>
<p>UÅ¾ivatelskÃ½ manuÃ¡l<sup><a href="https://wolfram.schneider.org/bsd/7thEdManVol2/m4/m4.pdf" title="The M4 Macro Processor" id="m4-ref4">[4]</a></sup> zmiÅˆuje jeÅ¡tÄ› dalÅ¡Ã­, zde neuvedenÃ© spoluautory.
Bylo by tedy znaÄnÄ› nespravedlivÃ© napsat, Å¾e autory makro procesoru M4 (1977) jsou <em>pouze</em> dva lidÃ©.</p>
<img src="../img/authors.jpg" alt="&#160;" width="960" height="400" id="m4-the-authors" title="Christopher Strachey, Dennis Ritchie, Brian Kernighan">
<p><em>ObrÃ¡zek <a href="#m4-the-authors" title="ğŸ”—">1</a>: Christopher Strachey<sup><a href="https://www.computerhope.com/people/christopher_strachey.htm" title="Christopher Strachey" id="m4-ref5">[5]</a></sup>,
Dennis Ritchie<sup><a href="https://pc.zoznam.sk/novinka/zomrel-tvorca-unixu-jazyka-c" title="Dennis Ritchie" id="m4-ref6">[6]</a></sup>,
Brian Kernighan<sup><a href="https://www.cs.cmu.edu/~mihaib/kernighan-interview/" title="Brian Kernighan" id="m4-ref7">[7]</a></sup></em></p>
<h3 id="m4-gnu-m4" class="m4-bh"><a href="#m4-gnu-m4">ğŸ”—</a>GNU M4<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h3>
<p>Dnes existuje nÄ›kolik implementacÃ­ liÅ¡Ã­cÃ­ se od pÅ¯vodnÃ­ implementace spÃ­Å¡e drobnostmi.
NejrozÅ¡Ã­Å™enÄ›jÅ¡Ã­ implementace M4 je <strong>GNU M4</strong> pouÅ¾Ã­vanÃ¡ pro <a href="https://en.wikipedia.org/wiki/GNU_Build_System" title="Wikipedie">Autotools</a>
a&nbsp;pro pÅ™eklad jednoduchÃ©ho konfiguraÄnÃ­ho souboru <code>sendmail.mc</code> na sloÅ¾itÃ½ <code>sendmail.cf</code>.
Autorem tÃ©to implementace z&nbsp;roku 1990 je <a href="https://www.seindal.dk/rene/gnu/"><span class="rs-person">RenÃ© Seindal</span></a>.
NÃ¡sledujÃ­cÃ­ pÅ™Ã­kaz nainstaluje <strong title="s malÃ½m â€mâ€œ" class="m4-hg">m4</strong>:</p>
<div id="m4-install" title="pÅ™Ã­kaz nainstaluje takÃ© dalÅ¡Ã­ dÅ¯leÅ¾itÃ© balÃ­Äky" class="m4-root">dnf -y install make m4 pinfo</div>
<p>PodrobnÃ½ popis klÃ­ÄovÃ½ch slov se nachÃ¡zÃ­ v&nbsp;dokumentaci<sup><a href="https://www.gnu.org/software/m4/manual/" title="GNU M4 - GNU macro processor" id="m4-ref8">[8]</a></sup>:</p>
<div class="m4-src"><pre>~]$ <strong>pinfo m4</strong>
~]$ <strong>man m4</strong>
~]$ <strong>m4 --help</strong></pre></div>
<h2 id="m4-zaklady-jazyka-m4" class="m4-ch"><a href="#m4-toc-zaklady-jazyka-m4" title="Obsah">â˜°</a><a href="#m4-zaklady-jazyka-m4" title="ğŸ”—">3</a>ZÃ¡klady jazyka M4<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h2>
<p>ZÃ¡kladem jazyka M4 je <strong>bezkontextovÃ¡ gramatika</strong>, <strong>automaty</strong>, <strong>zÃ¡sobnÃ­ky</strong> a&nbsp;<strong>vÃ½stupnÃ­ fronty</strong>.
Pro pochopenÃ­ jazyka M4 je proto velmi dÅ¯leÅ¾itÃ© rozumÄ›t zÃ¡kladnÃ­m pojmÅ¯m teorie formÃ¡lnÃ­ch jazykÅ¯ â€“
co jsou <a href="https://cs.wikipedia.org/wiki/Termin%C3%A1ln%C3%AD_a_netermin%C3%A1ln%C3%AD_symbol" title="Wikipedie">terminÃ¡lnÃ­ symboly</a> (struÄnÄ› <strong>terminÃ¡ly</strong>) a&nbsp;neterminÃ¡lnÃ­ symboly (struÄnÄ› <strong>neterminÃ¡ly</strong>).
ZmÃ­nÄ›nÃ© pojmy si podrobnÄ›ji vysvÄ›tlÃ­me nÄ›kdy pozdÄ›ji.
CÃ­lem tohoto ÃºvodnÃ­ho dÃ­lu je hlavnÄ› ukÃ¡zat praktickÃ© pouÅ¾itÃ­ M4 na pÅ™Ã­kladech.</p>
<h3 id="m4-bezkontextova-gramatika" class="m4-ch"><a href="#m4-toc-bezkontextova-gramatika" title="Obsah">â˜°</a><a href="#m4-bezkontextova-gramatika" title="ğŸ”—">3.1</a>BezkontextovÃ¡ gramatika<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h3>
<p>BezkontextovÃ¡ gramatika (krÃ¡tce <abbr title="Context-Free Grammar â€“ bezkontextovÃ¡ gramatika">CFG</abbr>) je <a href="#m4-formalni-gramatika-chomskeho-typ" title="FormÃ¡lnÃ­ gramatika (ChomskÃ©ho typu)">formÃ¡lnÃ­ gramatika</a>, ve kterÃ© majÃ­ vÅ¡echna pÅ™episovacÃ­ pravidla tvar <code class="m4-hg" data-id="m4-context-free-grammar-rules" data-ln="1">A&nbsp;â†’&nbsp;Î²</code>.
NeterminÃ¡l <code>A</code> se pÅ™epÃ­Å¡e na libovolnÄ› dlouhÃ½ Å™etÄ›zec <abbr title="pravÃ¡ strana pÅ™episovacÃ­ho pravidla"><code>Î²</code></abbr> sloÅ¾enÃ½ z&nbsp;terminÃ¡lÅ¯ <code>Î£</code> nebo neterminÃ¡lÅ¯ <code>N</code>.
<a href="https://en.wikipedia.org/wiki/Kleene_star" title="Wikipedie">Kleeneho hvÄ›zda</a> <code class="m4-hg" data-id="m4-context-free-grammar-rules" data-ln="3">*</code> znamenÃ¡, Å¾e se neterminÃ¡l <code>A</code> mÅ¯Å¾e pÅ™epsat na <abbr title="epsilon â€“ prÃ¡zdnÃ½ symbol"><code>Îµ</code></abbr> (pÅ™episovacÃ­ pravidlo <code>A&nbsp;â†’&nbsp;Îµ</code>).</p>
<div class="m4-src"><pre id="m4-context-free-grammar-rules" title="pÅ™episovacÃ­ pravidla bezkontextovÃ© gramatiky">P: A â†’ Î²
   A âˆˆ N
   Î² âˆˆ (N âˆª Î£)*</pre><a href="#m4-context-free-grammar-rules">ğŸ”—</a></div>
<h4 id="m4-prepisovaci-pravidla-m4" class="m4-bh"><a href="#m4-prepisovaci-pravidla-m4">ğŸ”—</a>PÅ™episovacÃ­ pravidla M4<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h4>
<p>PÅ™episovacÃ­ pravidla M4 jsou stejnÃ¡ jako pÅ™episovacÃ­ pravidla bezkontextovÃ© gramatiky.</p>
<div class="m4-src"><pre title="pÅ™episovacÃ­ pravidla M4"># A â†’ Î²
define(`A', `Î²')

# A â†’ Îµ
define(`A')
define(`A', `')</pre></div>
<p>VÅ¡echna klÃ­ÄovÃ¡ slova M4 jsou neterminÃ¡ly (makra), provedou nÄ›jakou akci a&nbsp;pÅ™epÃ­Å¡Ã­ se na <abbr title="epsilon â€“ prÃ¡zdnÃ½ symbol"><code>Îµ</code></abbr> nebo jinÃ½ symbol.
VÅ¡echna klÃ­ÄovÃ¡ slova lze pÅ™ejmenovat nebo ÃºplnÄ› vypnout.
Tato vlastnost je velmi dÅ¯leÅ¾itÃ¡ pro reÅ¾im preprocesoru.</p>
<div class="m4-src"><pre title="klÃ­ÄovÃ¡ slova M4 jsou neterminÃ¡ly">divert(â„¤) â†’ Îµ
define(`A', `Î²') â†’ Îµ
ifelse(`', `', `yes', `no') â†’ yes
ifelse(`', `', `ifdef(`dnl', `1', `0')', `no') â†’ ifdef(`dnl', `1', `0') â†’ 1
â€¦</pre></div>
<h4 id="m4-rizeni-expanze-neterminalu" class="m4-bh"><a href="#m4-rizeni-expanze-neterminalu">ğŸ”—</a>Å˜Ã­zenÃ­ expanze neterminÃ¡lÅ¯<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h4>
<p>VÃ½chozÃ­ dvojice znakÅ¯ <code>`'</code> v&nbsp;M4 Å™Ã­dÃ­ expanzi neterminÃ¡lÅ¯.
KlÃ­ÄovÃ© slovo <code>changequote()</code> je mÅ¯Å¾e zmÄ›nit na jinÃ© znaky, napÅ™Ã­klad {<code>[]</code>, <strong><code>â‚â†</code></strong>, <code>âŸ¦âŸ§</code>}.
NeterminÃ¡ly, kterÃ© nechceme (ihned) expandovat, jsou obklopeny touto dvojicÃ­ znakÅ¯.
PÅ™i prÅ¯chodu makro procesorem jsou vÅ¡echny symboly mezi touto dvojicÃ­ znakÅ¯ <strong>terminÃ¡lnÃ­mi symboly</strong> a&nbsp;vnÄ›jÅ¡Ã­ dvojice znakÅ¯ je odstranÄ›na.
DalÅ¡Ã­ prÅ¯chod jiÅ¾ zpÅ¯sobÃ­ expanzi pÅ¯vodnÄ› chrÃ¡nÄ›nÃ½ch neterminÃ¡lÅ¯.
Dvojice Å™Ã­dÃ­cÃ­ch znakÅ¯ se nastavuje na zaÄÃ¡tku koÅ™enovÃ©ho souboru.</p>
<h3 id="m4-automaty" class="m4-ch"><a href="#m4-toc-automaty" title="Obsah">â˜°</a><a href="#m4-automaty" title="ğŸ”—">3.2</a>Automaty<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h3>
<p>Automaty slouÅ¾Ã­ jako â€pÅ™epÃ­naÄeâ€œ pravidel gramatiky.
PouÅ¾Ã­vajÃ­ pÅ™episovacÃ­ pravidla gramatiky jako uzly a&nbsp;mÄ›nÃ­ svÃ© stavy podle vstupnÃ­ch symbolÅ¯.
AktuÃ¡lnÄ› pouÅ¾Ã­vanÃ© pÅ™episovacÃ­ pravidlo produkuje do vÃ½stupnÃ­ fronty (nebo do nÄ›kolika vÃ½stupnÃ­ch front)
specifickÃ½ kÃ³d, dokud automat nepÅ™ejde do jinÃ©ho uzlu s&nbsp;jinÃ½m pÅ™episovacÃ­m pravidlem.
PÅ™Ã­klady <a href="#m4-json-generujici-automat" title="[] JSON â€“ generujÃ­cÃ­ automat">generujÃ­cÃ­ch automatÅ¯</a> jsou ukÃ¡zÃ¡ny v&nbsp;pÅ™Ã­loze.</p>
<h3 id="m4-vystupni-fronty" class="m4-ch"><a href="#m4-toc-vystupni-fronty" title="Obsah">â˜°</a><a href="#m4-vystupni-fronty" title="ğŸ”—">3.3</a>VÃ½stupnÃ­ fronty<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h3>
<p>VÃ½stupnÃ­ fronty jsou doÄasnÃ© ÃºloÅ¾iÅ¡tÄ› pro ÄÃ¡sti vÃ½slednÃ©ho kÃ³du.
Tyto ÄÃ¡sti vÃ½slednÃ©ho kÃ³du jsou produkovÃ¡ny pÅ™episovacÃ­mi pravidly gramatiky, kterÃ© pÅ™episujÃ­ vstupnÃ­ symboly.
KlÃ­ÄovÃ© slovo <code>divert(â„¤)</code> nastavuje aktuÃ¡lnÃ­ vÃ½stupnÃ­ frontu.
Na zÃ¡vÄ›r jsou vÅ¡echny neprÃ¡zdnÃ© fronty vypsÃ¡ny ve vzestupnÃ©m poÅ™adÃ­ na standardnÃ­ vÃ½stup a&nbsp;sloÅ¾Ã­ vÃ½slednÃ½ kÃ³d z&nbsp;ÄÃ¡stÃ­ kÃ³du.
<a href="#m4-html-vystupni-fronty" title="[] HTML â€“ vÃ½stupnÃ­ fronty">VÃ½stupnÃ­ fronty</a> jsou ukÃ¡zÃ¡ny v&nbsp;pÅ™Ã­loze.</p>
<div title="pro informaci" class="rs-tip-major m4-info"><strong>ZÃ¡sobnÃ­ky</strong> si ukÃ¡Å¾eme pozdÄ›ji.</div>
<h2 id="m4-hlavni-pouziti-m4" class="m4-ch"><a href="#m4-toc-hlavni-pouziti-m4" title="Obsah">â˜°</a><a href="#m4-hlavni-pouziti-m4" title="ğŸ”—">4</a>HlavnÃ­ pouÅ¾itÃ­ M4<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h2>
<p>M4 se pouÅ¾Ã­vÃ¡ ke generovÃ¡nÃ­ zdrojovÃ©ho kÃ³du libovolnÃ©ho programovacÃ­ho jazyka nebo jako preprocesor jakÃ©hokoliv zdrojovÃ©ho kÃ³du.</p>
<h3 id="m4-generovani-kodu" class="m4-ch"><a href="#m4-toc-generovani-kodu" title="Obsah">â˜°</a><a href="#m4-generovani-kodu" title="ğŸ”—">4.1</a>GenerovÃ¡nÃ­ kÃ³du<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h3>
<p>M4 transformuje vstupnÃ­ data ze souborÅ¯ <abbr title="Macro Configuration"><code>.mc</code></abbr> na vÃ½slednÃ¡ data nÃ¡sledujÃ­cÃ­m pÅ™Ã­kazem:</p>
<div id="m4-files-on-command-line" title="â† nejobecnÄ›jÅ¡Ã­.m4 â€¦ nejspeciÃ¡lnÄ›jÅ¡Ã­.m4 â†’" class="m4-usc">m4 root.m4 stem.m4 branch.m4 leaf.m4 input1.mc input2.mc &gt; output.file</div>
<p>BÄ›hem naÄÃ­tÃ¡nÃ­ souborÅ¯ jsou provÃ¡dÄ›ny dvÄ› zÃ¡kladnÃ­ operace:</p>
<ol>
<li>ÄtenÃ­ transformaÄnÃ­ch pravidel ze souborÅ¯ s&nbsp;pÅ™Ã­ponou <code>.m4</code></li>
<li>expanze maker uvnitÅ™ souborÅ¯ s&nbsp;pÅ™Ã­ponou <code>.mc</code></li>
</ol>
<p>Soubory <code>input1.mc</code> a&nbsp;<code>input2.mc</code> obsahujÃ­ <strong>vstupnÃ­ data</strong> ve specifickÃ©m formÃ¡tu, kterÃ½ umoÅ¾Åˆuje jejich transformaci na <strong>vÃ½stupnÃ­ data</strong> podle pravidel v&nbsp;pÅ™edchozÃ­ch <code>.m4</code> souborech.
DatovÃ© soubory <code>.mc</code> obvykle neobsahujÃ­ Å¾Ã¡dnÃ¡ transformaÄnÃ­ pravidla.</p>
<p>VstupnÃ­ data mohou takÃ© pÅ™ichÃ¡zet z&nbsp;kolony:</p>
<div title="vstupnÃ­ kÃ³d â†’ generovÃ¡nÃ­ zdrojovÃ©ho kÃ³du â†’ soubor" class="m4-usc">cat input.mc | m4 root.m4 stem.m4 branch.m4 leaf.m4 - &gt; output.file</div>
<div title="vstupnÃ­ kÃ³d â†’ generovÃ¡nÃ­ zdrojovÃ©ho kÃ³du â†’ program" class="m4-usc">cat input.mc | m4 root.m4 stem.m4 branch.m4 leaf.m4 - | gcc -x c -o progr -</div>
<p>VyzkouÅ¡ejte: <a href="#m4-priklady-generovani-kodu" title="PÅ™Ã­klady generovÃ¡nÃ­ kÃ³du">PÅ™Ã­klady generovÃ¡nÃ­ kÃ³du</a></p>
<h3 id="m4-preprocesor" class="m4-ch"><a href="#m4-toc-preprocesor" title="Obsah">â˜°</a><a href="#m4-preprocesor" title="ğŸ”—">4.2</a>Preprocesor<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h3>
<p>M4 mÅ¯Å¾e pracovat v&nbsp;reÅ¾imu preprocesoru a mÅ¯Å¾e bÃ½t takÃ© souÄÃ¡stÃ­ kolony.
VstupnÃ­ zdrojovÃ½ kÃ³d jÃ­m prochÃ¡zÃ­ beze zmÄ›ny s&nbsp;vÃ½jimkou neterminÃ¡lnÃ­ch symbolÅ¯.
NalezenÃ© neterminÃ¡ly jsou expandovÃ¡ny na terminÃ¡ly a&nbsp;odchÃ¡zÃ­ spolu se zdrojovÃ½m kÃ³dem na vÃ½stup.
M4 mÅ¯Å¾e rozÅ¡Ã­Å™it jakÃ½koliv jinÃ½ jazyk, kde je preprocesor nedostateÄnÃ½ (bez rekurze) nebo Å¾Ã¡dnÃ½.
DÅ¯leÅ¾itÃ© je zvolit vhodnÃ½ levÃ½ znak pro Å™Ã­zenÃ­ expanze neterminÃ¡lÅ¯, kterÃ½ nesmÃ­ kolidovat se znakem vstupnÃ­ho zdrojovÃ©ho kÃ³du.
Kolize znaku je ale snadno Å™eÅ¡itelnÃ¡ regulÃ¡rnÃ­m vÃ½razem.</p>
<div title="M4 jako preprocesor â€“ obecnÄ›" class="m4-usc">m4 root.m4 stem.m4 branch.m4 leaf.m4 file.c &gt; preproc.file.c</div>
<div title="M4 jako preprocesor â€“ bez doÄasnÃ©ho souboru" class="m4-usc">m4 root.m4 stem.m4 branch.m4 leaf.m4 file.c | gcc -x c -o progr -</div>
<h4 id="m4-ba-vychozi-znaky" class="m4-bh"><a href="#m4-ba-vychozi-znaky">ğŸ”—</a><code>`'</code> VÃ½chozÃ­ znaky<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h4>
<p>KonfliktnÃ­ znak <code>`</code> ze vstupnÃ­ho zdrojovÃ©ho kÃ³du je skryt do makra <code>`'LQ()</code>.
PrÃ¡zdnÃ½ pÃ¡r Å™Ã­dÃ­cÃ­ch znakÅ¯ <code>`'</code> pÅ™ed makrem <code>LQ()</code> slouÅ¾Ã­ jako <a href="#m4-h-zavorky-h-dnl" title="[] .h â€“ zÃ¡vorky [], [,], [#], [dnl]">oddÄ›lovaÄ symbolÅ¯</a>.
PÅ™i prÅ¯chodu zdrojovÃ©ho kÃ³du makro procesorem se makro <code>`'LQ()</code> pÅ™epÃ­Å¡e zpÃ¡tky na pÅ¯vodnÃ­ znak <code>`</code> a&nbsp;prÃ¡zdnÃ½ pÃ¡r <code>`'</code> je odstranÄ›n.</p>
<div title="M4 jako preprocesor s Å™Ã­dÃ­cÃ­mi znaky: `'" class="m4-usc">sed 's/`/`'\''LQ()/g' any.src | m4 rootq.m4 leaf.m4 -</div>
<p>VyskytujÃ­-li se ve vstupnÃ­m kÃ³du komentÃ¡Å™e <code>#</code> nebo <code>dnl</code>, je nutnÃ© je skrÃ½t.
Znaky <code>`'</code> <a href="#m4-h-zavorky-h-dnl" title="[] .h â€“ zÃ¡vorky [], [,], [#], [dnl]">vypnou</a> pÅ¯vodnÃ­ vÃ½znam komentÃ¡Å™Å¯ a budou odebrÃ¡ny pÅ™i prÅ¯chodu makro procesorem.<br>
KomentÃ¡Å™e M4 <code>#</code> a <code>dnl</code> jsou skryty mezi vÃ½chozÃ­ znaky: <code>`#'</code> <code>`dnl'</code></p>
<div title="M4 jako preprocesor s Å™Ã­dÃ­cÃ­mi znaky: `'" class="m4-usc">sed 's/`/`'\''LQ()/g;s/#\|\&lt;dnl\&gt;/`&amp;'\''/g' any.src | m4 rootq.m4 leaf.m4 -</div>
<div title="M4 jako preprocesor s Å™Ã­dÃ­cÃ­mi znaky jinak: `'" class="m4-usc">sed 's/`/`'\''LQ()/g;s/#/`#'\''/g;s/\&lt;dnl\&gt;/`dnl'\''/g' any.src | m4 â€¦</div>
<h4 id="m4-hranate-zavorky" class="m4-bh"><a href="#m4-hranate-zavorky">ğŸ”—</a><code>[]</code> HranatÃ© zÃ¡vorky<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h4>
<p>PouÅ¾ijeme-li pro <a href="#m4-rizeni-expanze-neterminalu" title="Å˜Ã­zenÃ­ expanze neterminÃ¡lÅ¯">Å™Ã­zenÃ­ expanze neterminÃ¡lÅ¯</a> hranatÃ© zÃ¡vorky, stejnÃ½m zpÅ¯sobem je skryta levÃ¡ <code>[</code> hranatÃ¡ zÃ¡vorka.
VÅ¡e ostatnÃ­ platÃ­ jako pro vÃ½chozÃ­ znaky <code>`'</code>.</p>
<div title="M4 jako preprocesor s Å™Ã­dÃ­cÃ­mi znaky: []" class="m4-usc">sed 's/\[/[]LB()/g' any.src | m4 rootb.m4 leaf.m4 - | â€¦</div>
<p>KomentÃ¡Å™e M4 <code>#</code> a <code>dnl</code> jsou skryty mezi zÃ¡vorkami: <code>[#]</code> <code>[dnl]</code></p>
<div title="M4 jako preprocesor s Å™Ã­dÃ­cÃ­mi znaky: []" class="m4-usc">sed 's/\[/[]LB()/g;s/#\|\&lt;dnl\&gt;/[&amp;]/g' any.src | m4 rootb.m4 leaf.m4 - | â€¦</div>
<div title="M4 jako preprocesor s Å™Ã­dÃ­cÃ­mi znaky jinak: []" class="m4-usc">sed 's/\[/[]LB()/g;s/#/[#]/g;s/\&lt;dnl\&gt;/[dnl]/g' any.src | m4 rootb.m4 â€¦</div>
<h4 id="m4-netisknutelne-znaky" class="m4-bh"><a href="#m4-netisknutelne-znaky">ğŸ”—</a><code>â‚â†</code> NetisknutelnÃ© znaky<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h4>
<p>Pro Å™Ã­zenÃ­ expanze neterminÃ¡lÅ¯ lze pouÅ¾Ã­t netisknutelnÃ© znaky <strong><code>â‚</code></strong> (<samp>0x02</samp>) a&nbsp;<strong><code>â†</code></strong> (<samp>0x06</samp>).
Tyto znaky nemohou kolidovat s&nbsp;tisknutelnÃ½mi znaky zdrojovÃ©ho kÃ³du.</p>
<div title="M4 jako preprocesor s Å™Ã­dÃ­cÃ­mi znaky: â‚â†" class="m4-usc">m4 rootn.m4 leaf.m4 any.src | gcc â€¦</div>
<p>KomentÃ¡Å™e M4 <code>#</code> a <code>dnl</code> jsou skryty mezi netisknutelnÃ© znaky: <code>â‚#â†</code> <code>â‚dnlâ†</code></p>
<div title="M4 jako preprocesor s Å™Ã­dÃ­cÃ­mi znaky: â‚â†" class="m4-usc">sed 's/#\|\&lt;dnl\&gt;/â‚&amp;â†/g' any.src | m4 rootn.m4 leaf.m4 - | gcc â€¦</div>
<div title="M4 jako preprocesor s Å™Ã­dÃ­cÃ­mi znaky jinak: â‚â†" class="m4-usc">sed 's/#/â‚#â†/g;s/\&lt;dnl\&gt;/â‚dnlâ†/g' any.src | m4 rootn.m4 leaf.m4 - | gcc â€¦</div>
<h4 id="m4-utf-8-znaky" class="m4-bh"><a href="#m4-utf-8-znaky">ğŸ”—</a><code>âŸ¦âŸ§</code> UTF-8 znaky<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h4>
<p>Expanzi neterminÃ¡lÅ¯ mÅ¯Å¾e takÃ© Å™Ã­dit vhodnÄ› zvolenÃ½ pÃ¡r UTF-8 znakÅ¯.
BÄ›Å¾nÃ½ zdrojovÃ½ kÃ³d takovÃ© znaky neobsahuje, proto nemusÃ­me Å™eÅ¡it kolizi levÃ©ho <code>âŸ¦</code> znaku.
UTF-8 znaky nabÃ­zÃ­ podobnÃ© vÃ½hody jako netisknutelnÃ© znaky.</p>
<div title="M4 jako preprocesor s Å™Ã­dÃ­cÃ­mi znaky: âŸ¦âŸ§" class="m4-usc">m4 rootu.m4 leaf.m4 any.src | gcc â€¦</div>
<p>KomentÃ¡Å™e M4 <code>#</code> a <code>dnl</code> jsou skryty mezi UTF-8 znaky: <code>âŸ¦#âŸ§</code> <code>âŸ¦dnlâŸ§</code></p>
<div title="M4 jako preprocesor s Å™Ã­dÃ­cÃ­mi znaky: âŸ¦âŸ§" class="m4-usc">sed 's/#\|\&lt;dnl\&gt;/âŸ¦&amp;âŸ§/g' any.src | m4 rootu.m4 leaf.m4 - | gcc â€¦</div>
<div title="M4 jako preprocesor s Å™Ã­dÃ­cÃ­mi znaky jinak: âŸ¦âŸ§" class="m4-usc">sed 's/#/âŸ¦#âŸ§/g;s/\&lt;dnl\&gt;/âŸ¦dnlâŸ§/g' any.src | m4 rootu.m4 leaf.m4 - | gcc â€¦</div>
<p>VyzkouÅ¡ejte: <a href="#m4-priklady-preprocesoru" title="PÅ™Ã­klady preprocesoru">PÅ™Ã­klady preprocesoru</a></p>
<h4 id="m4-smiseny-rezim" class="m4-bh"><a href="#m4-smiseny-rezim">ğŸ”—</a>SmÃ­Å¡enÃ½ reÅ¾im<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h4>
<p>SmÃ­Å¡enÃ½ reÅ¾im je kombinacÃ­ pÅ™edchozÃ­ch reÅ¾imÅ¯ a&nbsp;je pouÅ¾Ã­vÃ¡n hlavnÄ› na pokusy.
Data nejsou oddÄ›lena od transformaÄnÃ­ch pravidel.
ListovÃ½ soubor <code>leaf.m4</code> obsahuje definice tÄ›chto pravidel spolu se vstupnÃ­mi daty.</p>
<div title="jak se nauÄit M4" class="m4-usc">m4 root.m4 leaf.m4</div>
<p>VyzkouÅ¡ejte: <a href="#m4-m4-priklady" title="M4 â€“ pÅ™Ã­klady">M4 â€“ pÅ™Ã­klady</a></p>
<h2 id="m4-predpoklady-pro-zvladnuti-m4" class="m4-ch"><a href="#m4-toc-predpoklady-pro-zvladnuti-m4" title="Obsah">â˜°</a><a href="#m4-predpoklady-pro-zvladnuti-m4" title="ğŸ”—">5</a>PÅ™edpoklady pro zvlÃ¡dnutÃ­ M4<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h2>
<p>Pro ÃºspÄ›Å¡nÃ© zvlÃ¡dnutÃ­ tohoto makro jazyka je dÅ¯leÅ¾itÃ© splnit nÄ›kolik pÅ™edpokladÅ¯.
M4 nenÃ­ jednoduchÃ½ jazyk, protoÅ¾e nenÃ­ moÅ¾nÃ© v&nbsp;nÄ›m myslet a&nbsp;programovat jako v&nbsp;bÄ›Å¾nÃ©m programovacÃ­m jazyce.
NejdÅ¯leÅ¾itÄ›jÅ¡Ã­ je uvÄ›domit si, Å¾e se v&nbsp;nÄ›m programujÃ­ pÅ™episovacÃ­ pravidla gramatiky.
KaÅ¾dÃ½ Å™etÄ›zec je buÄ terminÃ¡lnÃ­ nebo neterminÃ¡lnÃ­ symbol vÄetnÄ› vÅ¡ech klÃ­ÄovÃ½ch slov jazyka (symboly <code>#</code> a&nbsp;<code>,</code> jsou speciÃ¡lnÃ­ pÅ™Ã­pady neterminÃ¡lÅ¯).</p>
<div title="poznÃ¡mka" class="rs-tip-major m4-note">M4 zÃ¡mÄ›rnÄ› nemÃ¡ klÃ­ÄovÃ¡ slova pro <strong>cykly</strong> (<code>for</code>/<code>while</code>), protoÅ¾e jeho zÃ¡klad je zcela jinÃ½, neÅ¾ jakÃ½ majÃ­ procedurÃ¡lnÃ­ nebo funkcionÃ¡lnÃ­ jazyky.<hr>
<ul>
<li><strong>cykly</strong> jsou pouze levorekurzivnÃ­ nebo pravorekurzivnÃ­</li>
<li><strong>vÄ›tvÃ­</strong> se <a href="#m4-vetveni-gramatikou" title="[] VÄ›tvenÃ­ gramatikou">Å™etÄ›zenÃ­m symbolÅ¯</a> nebo klÃ­ÄovÃ½mi slovy <code>ifelse()</code>, <code>ifdef()</code></li>
</ul>
</div>
<h3 id="m4-zaklady-gramatik" class="m4-ch"><a href="#m4-toc-zaklady-gramatik" title="Obsah">â˜°</a><a href="#m4-zaklady-gramatik" title="ğŸ”—">5.1</a>ZÃ¡klady gramatik<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h3>
<p>ZÃ¡kladem vÅ¡ech gramatik jsou pÅ™episovacÃ­ pravidla, jejichÅ¾ podobu obecnÄ› popisuje:</p>
<h4 id="m4-formalni-gramatika-chomskeho-typ" class="m4-bh"><a href="#m4-formalni-gramatika-chomskeho-typ">ğŸ”—</a>FormÃ¡lnÃ­ gramatika (ChomskÃ©ho typu)<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h4>
<div class="m4-src"><pre>G = (N, Î£, P, S)
N: koneÄnÃ¡ mnoÅ¾ina neterminÃ¡lnÃ­ch symbolÅ¯
Î£: koneÄnÃ¡ mnoÅ¾ina terminÃ¡lnÃ­ch symbolÅ¯
   N âˆ© Î£ = Ã¸
P: koneÄnÃ¡ mnoÅ¾ina pÅ™episovacÃ­ch pravidel
   (N âˆª Î£)* N (N âˆª Î£)* â†’ (N âˆª Î£)*
S: je poÄÃ¡teÄnÃ­ (startovacÃ­) symbol
   S âˆˆ N</pre></div>
<p><a href="https://cs.wikipedia.org/wiki/Form%C3%A1ln%C3%AD_gramatika" title="Wikipedie">FormÃ¡lnÃ­ gramatika</a> popisuje <a href="https://cs.wikipedia.org/wiki/Chomsk%C3%A9ho_hierarchie" title="Wikipedie â€“ ChomskÃ©ho hierarchie">podmnoÅ¾iny</a> pÅ™episovacÃ­ch pravidel <a href="https://cs.wikipedia.org/wiki/Form%C3%A1ln%C3%AD_jazyk" title="Wikipedie">formÃ¡lnÃ­ho jazyka</a>.
Jedna z&nbsp;podmnoÅ¾in se jmenuje <a href="https://cs.wikipedia.org/wiki/Bezkontextov%C3%A1_gramatika" title="Wikipedie">bezkontextovÃ¡ gramatika</a>, krÃ¡tce <abbr title="Context-Free Grammar â€“ bezkontextovÃ¡ gramatika">CFG</abbr>.
Jak jiÅ¾ bylo dÅ™Ã­ve zmÃ­nÄ›no, pÅ™episovacÃ­ pravidla CFG pracujÃ­ stejnÄ› jako pÅ™episovacÃ­ pravidla jazyka M4.
NÄ›kterÃ½ z&nbsp;nÃ¡sledujÃ­cÃ­ch dÃ­lÅ¯ seriÃ¡lu se podrobnÄ›ji zamÄ›Å™Ã­ na formÃ¡lnÃ­ gramatiky.</p>
<h3 id="m4-zaklady-automatu" class="m4-ch"><a href="#m4-toc-zaklady-automatu" title="Obsah">â˜°</a><a href="#m4-zaklady-automatu" title="ğŸ”—">5.2</a>ZÃ¡klady automatÅ¯<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h3>
<p>Schopnost pouÅ¾Ã­vat pÅ™evÃ¡Å¾nÄ› dvoustavovÃ© automaty je zÃ¡sadnÃ­ vÄ›c pro psanÃ­ jednoduchÃ½ch M4 skriptÅ¯, protoÅ¾e pÅ™evÃ¡Å¾nÃ¡ vÄ›tÅ¡ina skriptÅ¯ pouÅ¾Ã­vÃ¡ <a href="#m4-c-maly-automat" title="[] C â€“ malÃ½ automat">malÃ© automaty</a>.</p>
<h4 id="m4-testovaci-automat" class="m4-bh"><a href="#m4-testovaci-automat">ğŸ”—</a>TestovacÃ­ automat<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h4>
<p>PoÅ™adÃ­ vstupnÃ­ch symbolÅ¯ nebo jejich kontext lze otestovat automatem.
SplÅˆujÃ­-li vstupnÃ­ symboly poÅ¾adovanÃ© vlastnosti, automat skonÄÃ­ v&nbsp;uzlu s&nbsp;dvojitÃ½m krouÅ¾kem, kterÃ½m se oznaÄuje akceptujÃ­cÃ­ stav.</p>
<img src="../img/dfa.png" alt="&#160;" width="274" height="155" id="m4-dfa-img" title="deterministickÃ½ koneÄnÃ½ automat (DFA)">
<p><em>ObrÃ¡zek <a href="#m4-dfa-img" title="ğŸ”—">2</a>: PÅ™Ã­klad automatu<sup><a href="https://cs.wikipedia.org/wiki/Teorie_automat%C5%AF" title="Teorie automatÅ¯" id="m4-ref9">[9]</a></sup> akceptujÃ­cÃ­ sudÃ½ poÄet (Å¾Ã¡dnÃ½ je takÃ© sudÃ½) symbolÅ¯ <code>0</code>, ignorujÃ­cÃ­ symboly <code>1</code>.
Automat je shodnÃ½ s&nbsp;regulÃ¡rnÃ­m vÃ½razem <code>(1*01*01*)*1*</code>.</em></p>
<p>PÅ™edchozÃ­ automat lze zapsat jako ASCII art doprovÃ¡zejÃ­cÃ­ M4 skript:</p>
<div class="m4-src"><pre title="ASCII art jako dokumentace M4 kÃ³du">#          ____1
#         |   /
#      ___V__/   0    ____
# ---&gt;// S1 \\------&gt;/ S2 \---.1
#     \\____//&lt;------\____/&lt;--'
#                0</pre></div>
<h4 id="m4-generujici-automat" class="m4-bh"><a href="#m4-generujici-automat">ğŸ”—</a>GenerujÃ­cÃ­ automat<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h4>
<p>VstupnÃ­ symboly mÄ›nÃ­ uzly automatu, ÄÃ­mÅ¾ zÃ¡roveÅˆ mÄ›nÃ­ pÅ™episovacÃ­ pravidla pro generovÃ¡nÃ­ kÃ³du.
PÅ™Ã­klad <a href="#m4-json-generujici-automat" title="[] JSON â€“ generujÃ­cÃ­ automat">generujÃ­cÃ­ho automatu</a> naleznete v&nbsp;pÅ™Ã­loze:</p>
<div class="m4-src"><pre title="ASCII art generujÃ­cÃ­ho automatu">#      _______      ___________
# ---&gt;/ ERROR \---&gt;/ NEXT_ITEM \---.
#     \_______/    \___________/&lt;--'</pre></div>
<h3 id="m4-gnu-make" class="m4-ch"><a href="#m4-toc-gnu-make" title="Obsah">â˜°</a><a href="#m4-gnu-make" title="ğŸ”—">5.3</a>(GNU) make<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h3>
<p>DobÅ™e navrÅ¾enÃ½ generÃ¡tor kÃ³du se obvykle sklÃ¡dÃ¡ z&nbsp;nÄ›kolika menÅ¡Ã­ch souborÅ¯, jejichÅ¾ poÅ™adÃ­, zÃ¡vislosti a&nbsp;parametry se zapisujÃ­ do souboru <code>Makefile</code>.
DobrÃ¡ znalost tvorby <code>Makefile</code> je proto zÃ¡kladnÃ­m pÅ™edpokladem pro zvlÃ¡dnutÃ­ M4.
ÄŒtenÃ­ a ÃºdrÅ¾ba zdrojovÃ©ho kÃ³du celkovÄ› zabere vÅ¾dy vÃ­ce Äasu neÅ¾ jeho tvorba.
DobÅ™e strukturovanÃ½ <code>Makefile</code> proto zÃ¡sadnÃ­m zpÅ¯sobem pÅ™ispÃ­vÃ¡ k&nbsp;celkovÃ© pÅ™ehlednosti vÃ½slednÃ©ho generÃ¡toru kÃ³du.</p>
<div title="tÃ­mto tÃ©matem se budeme zabÃ½vat jindy" class="rs-tip-major m4-note">SpouÅ¡tÄ›nÃ­ <code>make</code><sup><a href="https://www.gnu.org/software/make/manual/make.html" title="GNU Make Manual" id="m4-ref10">[10]</a></sup> z&nbsp;editoru kÃ³du pomocÃ­ vhodnÃ© klÃ¡vesovÃ© zkratky zÃ¡sadnÄ› urychluje vÃ½voj M4 kÃ³du.
Soubor <code>~/.vimrc</code> obsahuje <code>nnoremap &lt;c-j&gt; :make&lt;cr&gt;</code>.</div>
<h3 id="m4-vim" class="m4-ch"><a href="#m4-toc-vim" title="Obsah">â˜°</a><a href="#m4-vim" title="ğŸ”—">5.4</a>Vim<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h3>
<p>ZvlÃ¡dnutÃ­ editoru Vim<sup><a href="https://www.vim.org/" title="Vim â€“ vÅ¡udypÅ™Ã­tomnÃ½ textovÃ½ editor" id="m4-ref11">[11]</a></sup> je dÅ¯leÅ¾itÃ½m pÅ™edpokladem pro pohodlÃ­ a&nbsp;rychlost psanÃ­ kÃ³du M4.
Vim zkratky, definovanÃ© klÃ­ÄovÃ½m slovem <code>iabbrev</code>, uÅ¡etÅ™Ã­ velkÃ© mnoÅ¾stvÃ­ zbyteÄnÄ› napsanÃ©ho textu.
Tyto zkratky takÃ© vÃ½znamnÄ› sniÅ¾ujÃ­ vÃ½skyt tÃ©mÄ›Å™ neviditelnÃ½ch chyb zpÅ¯sobenÃ½ch nepÃ¡rovou zÃ¡vorkou, ÄÃ­mÅ¾ Å¡etÅ™Ã­ ztracenÃ½ Äas vynaloÅ¾enÃ½ na ladÄ›nÃ­ kÃ³du.</p>
<h3 id="m4-talent-a-cas" class="m4-ch"><a href="#m4-toc-talent-a-cas" title="Obsah">â˜°</a><a href="#m4-talent-a-cas" title="ğŸ”—">5.5</a>Talent a Äas<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h3>
<p>M4 obvykle nejde zcela zvlÃ¡dnout pÅ™es vÃ­kend, zvlÃ¡Å¡tÄ› chybÃ­-li zÃ¡klady<sup><a href="https://is.muni.cz/elportal/estud/fi/js06/ib005/Formalni_jazyky_a_automaty_I.pdf" title="Automaty a&nbsp;formÃ¡lnÃ­ jazyky I" id="m4-ref12">[12]</a></sup>
<a href="https://cs.wikipedia.org/wiki/Teorie_automat%C5%AF" title="Wikipedie">teorie&nbsp;automatÅ¯</a> a&nbsp;<a href="https://cs.wikipedia.org/wiki/Form%C3%A1ln%C3%AD_gramatika" title="Wikipedie">formÃ¡lnÃ­ch&nbsp;gramatik</a>.
Pro dokonalÃ© zvlÃ¡dnutÃ­ M4 je nutnÃ© â€odpÅ™emÃ½Å¡let siâ€œ delÅ¡Ã­ obdobÃ­ a&nbsp;napsat urÄitÃ© mnoÅ¾stvÃ­ Å¡patnÃ©ho (sloÅ¾itÃ©ho) M4 kÃ³du, kterÃ½ z&nbsp;vlastnÃ­ vÅ¯le pÅ™epÃ­Å¡ete kvÅ¯li lepÅ¡Ã­mu nÃ¡padu.
TÃ­mto zpÅ¯sobem je moÅ¾nÃ© postupnÄ› zÃ­skat praxi.</p>
<!-- article references -->
<h2 id="m4-refs" class="m4-ch"><a href="#m4-toc-refs" title="Obsah">â˜°</a><a href="#m4-refs" title="ğŸ”—">6</a>Odkazy<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h2>
<ol class="m4-refs">
<li><a href="#m4-ref1" title="odkaz v textu">â†‘</a><strong>GenerovÃ¡nÃ­ kÃ³du v M4</strong>, vÃ­cejazyÄnÃ¡ Å¡ablona s&nbsp;pÅ™Ã­klady pro <a href="https://www.root.cz" title="Root.cz â€“ informace nejen ze svÄ›ta Linuxu">www.root.cz</a><br>
<a href="http://github.com/jkubin/m4root">http://github.com/jkubin/m4root</a></li>
<li><a href="#m4-ref2" title="odkaz v textu">â†‘</a><strong>A&nbsp;General Purpose Macro-generator</strong>, Computer Journal 8, 3 (1965), 225â€“41<br>
<a href="http://dx.doi.org/10.1093/comjnl/8.3.225">http://dx.doi.org/10.1093/comjnl/8.3.225</a></li>
<li><a href="#m4-ref3" title="odkaz v textu">â†‘</a><strong>RATFOR â€” A Preprocessor for a Rational Fortran</strong>, Brian W. Kernighan<br>
<a href="https://wolfram.schneider.org/bsd/7thEdManVol2/ratfor/ratfor.pdf">https://wolfram.schneider.org/bsd/7thEdManVol2/ratfor/ratfor.pdf</a></li>
<li><a href="#m4-ref4" title="odkaz v textu">â†‘</a><strong>The M4 Macro Processor</strong>, Bell Laboratories (1977)<br>
<a href="https://wolfram.schneider.org/bsd/7thEdManVol2/m4/m4.pdf">https://wolfram.schneider.org/bsd/7thEdManVol2/m4/m4.pdf</a></li>
<li><a href="#m4-ref5" title="odkaz v textu">â†‘</a><strong>Christopher Strachey</strong>, Computer Hope â€“ Free computer help since 1998<br>
<a href="https://www.computerhope.com/people/christopher_strachey.htm">https://www.computerhope.com/people/christopher_strachey.htm</a></li>
<li><a href="#m4-ref6" title="odkaz v textu">â†‘</a><strong>Dennis Ritchie</strong>, Zomrel tvorca Unixu a&nbsp;jazyka&nbsp;C<br>
<a href="https://pc.zoznam.sk/novinka/zomrel-tvorca-unixu-jazyka-c">https://pc.zoznam.sk/novinka/zomrel-tvorca-unixu-jazyka-c</a></li>
<li><a href="#m4-ref7" title="odkaz v textu">â†‘</a><strong>Brian Kernighan</strong>, An Interview with Brian Kernighan<br>
<a href="https://www.cs.cmu.edu/~mihaib/kernighan-interview/">https://www.cs.cmu.edu/~mihaib/kernighan-interview/</a></li>
<li><a href="#m4-ref8" title="odkaz v textu">â†‘</a><strong>GNU M4 - GNU macro processor</strong>, Free Software Foundation<br>
<a href="https://www.gnu.org/software/m4/manual/">https://www.gnu.org/software/m4/manual/</a></li>
<li><a href="#m4-ref9" title="odkaz v textu">â†‘</a><strong>Teorie automatÅ¯</strong>, From Wikipedia, the free encyclopedia<br>
<a href="https://cs.wikipedia.org/wiki/Teorie_automat%C5%AF">https://cs.wikipedia.org/wiki/Teorie_automat%C5%AF</a></li>
<li><a href="#m4-ref10" title="odkaz v textu">â†‘</a><strong>GNU Make Manual</strong>, Free Software Foundation<br>
<a href="https://www.gnu.org/software/make/manual/make.html">https://www.gnu.org/software/make/manual/make.html</a></li>
<li><a href="#m4-ref11" title="odkaz v textu">â†‘</a><strong>Vim â€“ vÅ¡udypÅ™Ã­tomnÃ½ textovÃ½ editor</strong>, kterÃ½ edituje text rychlostÃ­ myÅ¡lenky<br>
<a href="https://www.vim.org/">https://www.vim.org/</a></li>
<li><a href="#m4-ref12" title="odkaz v textu">â†‘</a><strong>Automaty a&nbsp;formÃ¡lnÃ­ jazyky I</strong>, UÄebnÃ­ text FI MU<br>
<a href="https://is.muni.cz/elportal/estud/fi/js06/ib005/Formalni_jazyky_a_automaty_I.pdf">https://is.muni.cz/elportal/estud/fi/js06/ib005/Formalni_jazyky_a_automaty_I.pdf</a></li>
<li><strong>Automaty a&nbsp;gramatiky</strong>, Michal Chytil, 1. vydÃ¡nÃ­, Praha, 331 s. 1984.<br>
<a href="https://is.muni.cz/publication/173173">https://is.muni.cz/publication/173173</a></li>
</ol>
<!-- appendix content -->
<h2 id="m4-priklady-generovani-kodu" class="m4-ch"><a href="#m4-toc-priklady-generovani-kodu" title="Obsah">â˜°</a><a href="#m4-priklady-generovani-kodu" title="ğŸ”—">A</a>PÅ™Ã­klady generovÃ¡nÃ­ kÃ³du<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h2>
<div title="pro informaci" class="rs-tip-major m4-info">Znaky {<code>`'</code>, <code>[]</code>, <strong><code>â‚â†</code></strong>, <code>âŸ¦âŸ§</code>} v&nbsp;nÃ¡zvu pÅ™Ã­kladu <a href="#m4-rizeni-expanze-neterminalu" title="Å˜Ã­zenÃ­ expanze neterminÃ¡lÅ¯">Å™Ã­dÃ­ expanzi neterminÃ¡lÅ¯</a>.</div>
<p id="m4-toc-vstupni-zdrojovy-kod" class="m4-l2"><a href="#m4-vstupni-zdrojovy-kod"><b>A.1</b><code>[]</code> VstupnÃ­ zdrojovÃ½ kÃ³d</a></p>
<p id="m4-toc-csv-nejjednodussi-priklad" class="m4-l2"><a href="#m4-csv-nejjednodussi-priklad"><b>A.2</b><code>[]</code> CSV â€“ nejjednoduÅ¡Å¡Ã­ pÅ™Ã­klad</a></p>
<p id="m4-toc-csv-pocitadlo" class="m4-l2"><a href="#m4-csv-pocitadlo"><b>A.3</b><code>[]</code> CSV â€“ poÄÃ­tadlo</a></p>
<p id="m4-toc-upravy-specialnich-znaku" class="m4-l2"><a href="#m4-upravy-specialnich-znaku"><b>A.4</b><code title="jak se to dÄ›lÃ¡" style="cursor:help">ğŸ’¡</code> Ãšpravy speciÃ¡lnÃ­ch znakÅ¯</a></p>
<p id="m4-toc-c-vystupni-fronta" class="m4-l2"><a href="#m4-c-vystupni-fronta"><b>A.5</b><code>[]</code> C â€“ vÃ½stupnÃ­ fronta</a></p>
<p id="m4-toc-ini-externi-prikaz" class="m4-l2"><a href="#m4-ini-externi-prikaz"><b>A.6</b><code>[]</code> INI â€“ externÃ­ pÅ™Ã­kaz</a></p>
<p id="m4-toc-h-hex-pocitadlo" class="m4-l2"><a href="#m4-h-hex-pocitadlo"><b>A.7</b><code>[]</code> .h â€“ hex poÄÃ­tadlo</a></p>
<p id="m4-toc-c-maly-automat" class="m4-l2"><a href="#m4-c-maly-automat"><b>A.8</b><code>[]</code> C â€“ malÃ½ automat</a></p>
<p id="m4-toc-c-maly-automat-2" class="m4-l2"><a href="#m4-c-maly-automat-2"><b>A.9</b><code>[]</code> C â€“ malÃ½ automat 2</a></p>
<p id="m4-toc-html-vystupni-fronty" class="m4-l2"><a href="#m4-html-vystupni-fronty"><b>A.10</b><code>[]</code> HTML â€“ vÃ½stupnÃ­ fronty</a></p>
<p id="m4-toc-vetveni-gramatikou" class="m4-l2"><a href="#m4-vetveni-gramatikou"><b>A.11</b><code>[]</code> VÄ›tvenÃ­ gramatikou</a></p>
<p id="m4-toc-json-generujici-automat" class="m4-l2"><a href="#m4-json-generujici-automat"><b>A.12</b><code>[]</code> JSON â€“ generujÃ­cÃ­ automat</a></p>
<p id="m4-toc-json-pojmenovane-fronty" class="m4-l3"><a href="#m4-json-pojmenovane-fronty"><b>A.12.1</b><code>[]</code> JSON â€“ pojmenovanÃ© fronty</a></p>
<p id="m4-toc-json-generovane-indexy-front" class="m4-l3"><a href="#m4-json-generovane-indexy-front"><b>A.12.2</b><code>[]</code> JSON â€“ generovanÃ© indexy front</a></p>
<p id="m4-toc-ini-nespojity-index-front" class="m4-l2"><a href="#m4-ini-nespojity-index-front"><b>A.13</b><code>[]</code> INI â€“ nespojitÃ½ index front</a></p>
<p id="m4-toc-xml-smisene-zpravy" class="m4-l2"><a href="#m4-xml-smisene-zpravy"><b>A.14</b><code>[]</code> XML â€“ smÃ­Å¡enÃ© zprÃ¡vy</a></p>
<p id="m4-toc-xml-oddelene-zpravy" class="m4-l2"><a href="#m4-xml-oddelene-zpravy"><b>A.15</b><code>[]</code> XML â€“ oddÄ›lenÃ© zprÃ¡vy</a></p>
<p id="m4-toc-bash-cmd-echo-dretezecd" class="m4-l2"><a href="#m4-bash-cmd-echo-dretezecd"><b>A.16</b><code>[]</code> Bash <code>~]$ echo &quot;Å™etÄ›zec&quot;</code></a></p>
<p id="m4-toc-bash-cmd-echo-aretezeca" class="m4-l2"><a href="#m4-bash-cmd-echo-aretezeca"><b>A.17</b><code>[]</code> Bash <code>~]$ echo 'Å™etÄ›zec'</code></a></p>
<div title="poznÃ¡mka" class="rs-tip-major m4-note">PÅ™Ã­klady v&nbsp;tÃ©to pÅ™Ã­loze jsou sloÅ¾itÄ›jÅ¡Ã­ a&nbsp;jejich cÃ­lem je ukÃ¡zat praktickÃ© pouÅ¾itÃ­ jazyka M4.
PodrobnÄ›ji budou vysvÄ›tleny pozdÄ›ji.</div>
<h3 id="m4-vstupni-zdrojovy-kod" class="m4-ch"><a href="#m4-toc-vstupni-zdrojovy-kod" title="Obsah">â˜°</a><a href="#m4-vstupni-zdrojovy-kod" title="ğŸ”—">A.1</a><code>[]</code> VstupnÃ­ zdrojovÃ½ kÃ³d<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h3>
<p>VstupnÃ­ zdrojovÃ½ kÃ³d je podobnÃ½ <abbr title="Comma Separated Values">CSV</abbr>, kterÃ½ se pÅ™evede na libovolnÄ› sloÅ¾itÃ½ cÃ­lovÃ½ kÃ³d jinÃ©ho jazyka pomocÃ­ <abbr title="Context-Free Grammar â€“ bezkontextovÃ¡ gramatika">CFG</abbr>, automatÅ¯ a&nbsp;vÃ½stupnÃ­ch front.
ZÃ¡sobnÃ­ky v&nbsp;pÅ™Ã­kladech nejsou pouÅ¾ity.
VstupnÃ­ zdrojovÃ½ kÃ³d obsahuje speciÃ¡lnÃ­ znaky, kterÃ© je nutnÃ© skrÃ½t:</p>
<div class="m4-src"><pre id="m4-messages-messages-raw-mc"># 2018/05/15 Josef Kubin

ERROR([COMPLEX],     [!"#$%&amp;'()*+ ,-./:;&lt;=&gt;?@[\]^_`{|}~])
QUERY([READABLE],    [Is badly written M4 code readable [N/y]?])
ERROR([SUCCESS],     [Complex M4 code failed successfully.])
WARNING([ADDICTIVE], [Programming in M4 is addictive!])
ERROR([NOFAULT],     [It's not a language fault!])
WARNING([NO_ERRORS], [No other errors detected.])</pre><code><span title="2020-01-06 16:21:10 +0100">b53eafe</span><a href="../messages/messages_raw.mc" title="localhost:~/messages/messages_raw.mc">messages_raw.mc</a><a href="#m4-messages-messages-raw-mc">ğŸ”—</a></code></div>
<div title="poznÃ¡mka" class="rs-tip-major m4-note">VstupnÃ­ soubor mÅ¯Å¾e takÃ© obsahovat poznÃ¡mky, kterÃ© nemusÃ­ bÃ½t skrytÃ© v&nbsp;komentÃ¡Å™Ã­ch <code>#</code>, <code>dnl</code>, <code>ifelse([â€¦])</code> nebo <code>[â€¦ nÄ›kde uvnitÅ™ zÃ¡vorek â€¦]</code>.</div>
<h3 id="m4-csv-nejjednodussi-priklad" class="m4-ch"><a href="#m4-toc-csv-nejjednodussi-priklad" title="Obsah">â˜°</a><a href="#m4-csv-nejjednodussi-priklad" title="ğŸ”—">A.2</a><code>[]</code> CSV â€“ nejjednoduÅ¡Å¡Ã­ pÅ™Ã­klad<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h3>
<p>Tento pÅ™Ã­klad nepouÅ¾Ã­vÃ¡ vÃ½stupnÃ­ fronty, pouze generuje <abbr title="Comma Separated Values">CSV</abbr> oddÄ›lenÃ© znakem <code>TAB</code>.</p>
<div class="m4-src"><pre id="m4-messages-hello-csv-m4"># A â†’ Î²
define([ERROR], [

	divert(0)dnl
[$1]	$2
divert(-1)
])</pre><code><span title="2020-01-06 16:21:10 +0100">b53eafe</span><a href="../messages/hello.csv.m4" title="localhost:~/messages/hello.csv.m4">hello.csv.m4</a><a href="#m4-messages-hello-csv-m4">ğŸ”—</a></code></div>
<div title="pÅ™Ã­kaz" class="m4-usc">m4 <a href="../gfiles/rootb.m4" title="localhost:~/gfiles/rootb.m4">rootb.m4</a> <a href="../messages/hello.csv.m4" title="localhost:~/messages/hello.csv.m4">hello.csv.m4</a> <a href="../messages/messages_raw.mc" title="localhost:~/messages/messages_raw.mc">messages_raw.mc</a> &gt; <a href="../messages/hello.csv" title="localhost:~/messages/hello.csv">hello.csv</a></div>
<div class="m4-src"><pre id="m4-messages-hello-csv">COMPLEX	!"#$%&amp;'()*+,-./:;&lt;=&gt;?@[\]^_`{|}~
SUCCESS	Complex M4 code failed successfully.
NOFAULT	It's not a language fault!</pre><code><span title="2020-01-06 16:21:10 +0100">b53eafe</span><a href="../messages/hello.csv" title="localhost:~/messages/hello.csv">hello.csv</a><a href="#m4-messages-hello-csv">ğŸ”—</a></code></div>
<h3 id="m4-csv-pocitadlo" class="m4-ch"><a href="#m4-toc-csv-pocitadlo" title="Obsah">â˜°</a><a href="#m4-csv-pocitadlo" title="ğŸ”—">A.3</a><code>[]</code> CSV â€“ poÄÃ­tadlo<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h3>
<p>PÅ™Ã­klad pouÅ¾Ã­vÃ¡ makro <code>COUNT_UP</code> z&nbsp;koÅ™enovÃ©ho souboru, jehoÅ¾ <abbr title="pravÃ¡ strana pÅ™episovacÃ­ho pravidla"><code>Î²</code></abbr> se zkopÃ­ruje do pravÃ© strany makra <code>COUNTER</code>.
BÄ›hem prvnÃ­ expanze <code>COUNTER</code> probÄ›hne inicializace jeho startovacÃ­ hodnoty.
DalÅ¡Ã­ expanze vrÃ¡tÃ­ ÄÃ­selnÃ½ terminÃ¡lnÃ­ symbol a&nbsp;probÄ›hne zvÃ½Å¡enÃ­ pomocnÃ©ho (globÃ¡lnÃ­ho) symbolu o&nbsp;jedniÄku.
<code>COUNTER</code> je malÃ½ automat.</p>
<div class="m4-src"><pre id="m4-messages-counter-csv-m4"># A â†’ Î²
define([COUNTER], defn([COUNT_UP]))

# init counter
COUNTER(1)

# A â†’ Î²
define([ERROR], [

	divert(0)dnl
ERR_[]COUNTER	[$1]	$2
divert(-1)
])</pre><code><span title="2020-01-06 16:21:10 +0100">b53eafe</span><a href="../messages/counter.csv.m4" title="localhost:~/messages/counter.csv.m4">counter.csv.m4</a><a href="#m4-messages-counter-csv-m4">ğŸ”—</a></code></div>
<div title="pÅ™Ã­kaz" class="m4-usc">m4 <a href="../gfiles/rootb.m4" title="localhost:~/gfiles/rootb.m4">rootb.m4</a> <a href="../messages/counter.csv.m4" title="localhost:~/messages/counter.csv.m4">counter.csv.m4</a> <a href="../messages/messages_raw.mc" title="localhost:~/messages/messages_raw.mc">messages_raw.mc</a> &gt; <a href="../messages/counter.csv" title="localhost:~/messages/counter.csv">counter.csv</a></div>
<div class="m4-src"><pre id="m4-messages-counter-csv">ERR_1	COMPLEX	!"#$%&amp;'()*+,-./:;&lt;=&gt;?@[\]^_`{|}~
ERR_2	SUCCESS	Complex M4 code failed successfully.
ERR_3	NOFAULT	It's not a language fault!</pre><code><span title="2020-01-06 16:21:10 +0100">b53eafe</span><a href="../messages/counter.csv" title="localhost:~/messages/counter.csv">counter.csv</a><a href="#m4-messages-counter-csv">ğŸ”—</a></code></div>
<h3 id="m4-upravy-specialnich-znaku" class="m4-ch"><a href="#m4-toc-upravy-specialnich-znaku" title="Obsah">â˜°</a><a href="#m4-upravy-specialnich-znaku" title="ğŸ”—">A.4</a><code title="jak se to dÄ›lÃ¡" style="cursor:help">ğŸ’¡</code> Ãšpravy speciÃ¡lnÃ­ch znakÅ¯<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h3>
<p>KaÅ¾dÃ½ typ vÃ½stupnÃ­ho kÃ³du vyÅ¾aduje Ãºpravu speciÃ¡lnÃ­ch znakÅ¯.
KlÃ­ÄovÃ© slovo jazyka M4 <code>patsubst()</code> je nevhodnÃ© pro tento Ãºkol.
VÅ¡echny speciÃ¡lnÃ­ znaky vstupnÃ­ho souboru proto napÅ™ed skryjeme do vhodnÄ› pojmenovanÃ½ch maker pomocÃ­ regulÃ¡rnÃ­ch vÃ½razÅ¯.</p>
<h4 id="m4-upraveny-vstupni-kod" class="m4-bh"><a href="#m4-upraveny-vstupni-kod">ğŸ”—</a>UpravenÃ½ vstupnÃ­ kÃ³d<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h4>
<div class="m4-src"><pre id="m4-messages-messages-mc" title="vÅ¡echny speciÃ¡lnÃ­ znaky jsou skryty do maker"># 2018/05/15 Josef Kubin

ERROR([COMPLEX],     [[]EX()[]DQ()[#]$%[]AMP()[]AP()()*+,-./:;[]LT()=[]GT()?@[]LB()[]BS()[]RB()^_[]BQ(){|}~])
QUERY([READABLE],    [Is badly written M4 code readable []LB()N/y[]RB()?])
ERROR([SUCCESS],     [Complex M4 code failed successfully.])
WARNING([ADDICTIVE], [Programming in M4 is addictive[]EX()])
ERROR([NOFAULT],     [It[]AP()s not a language fault[]EX()])
WARNING([NO_ERRORS], [No other errors detected.])</pre><code><span title="2020-03-09 00:12:55 +0100">cce57f8</span><a href="../messages/messages.mc" title="localhost:~/messages/messages.mc">messages.mc</a><a href="#m4-messages-messages-mc">ğŸ”—</a></code></div>
<p>VytvoÅ™Ã­me nÄ›kolik pÅ™evodnÃ­ch souborÅ¯ podle typu cÃ­lovÃ©ho kÃ³du, makra pro hranatÃ© zÃ¡vorky <code>LB()</code> a <code>RB()</code> jsou uÅ¾ definovÃ¡na v&nbsp;koÅ™enovÃ©m souboru.</p>
<h4 id="m4-prevodni-soubor-pro-xml-xslt-htm" class="m4-bh"><a href="#m4-prevodni-soubor-pro-xml-xslt-htm">ğŸ”—</a><code>[]</code> PÅ™evodnÃ­ soubor pro XML, XSLT, HTML<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h4>
<div class="m4-src"><pre id="m4-messages-markup-m4" title="pÅ™evodnÃ­ soubor pro znaÄkovacÃ­ jazyky"># A â†’ Î²
define([AMP], [&amp;amp;])
define([AP], ['])
define([BQ], [`])
define([BS], [\])
define([DQ], ["])
define([EX], [!])
define([GT], [&amp;gt;])
define([LT], [&amp;lt;])</pre><code><span title="2020-01-06 16:21:10 +0100">b53eafe</span><a href="../messages/markup.m4" title="localhost:~/messages/markup.m4">markup.m4</a><a href="#m4-messages-markup-m4">ğŸ”—</a></code></div>
<h4 id="m4-prevodni-soubor-pro-c-json-ini-d" class="m4-bh"><a href="#m4-prevodni-soubor-pro-c-json-ini-d">ğŸ”—</a><code>[]</code> PÅ™evodnÃ­ soubor pro C, JSON, INI: <code>&quot;Å™etÄ›zec&quot;</code><sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h4>
<div class="m4-src"><pre id="m4-messages-code-m4" title="pÅ™evodnÃ­ soubor pro zdrojovÃ½ kÃ³d"># A â†’ Î²
define([AMP], [&amp;])
define([AP], ['])
define([BQ], [`])
define([BS], [\\])
define([DQ], [\"])
define([EX], [!])
define([GT], [&gt;])
define([LT], [&lt;])</pre><code><span title="2020-01-06 16:21:10 +0100">b53eafe</span><a href="../messages/code.m4" title="localhost:~/messages/code.m4">code.m4</a><a href="#m4-messages-code-m4">ğŸ”—</a></code></div>
<h4 id="m4-prevodni-soubor-pro-bash-dreteze" class="m4-bh"><a href="#m4-prevodni-soubor-pro-bash-dreteze">ğŸ”—</a><code>[]</code> PÅ™evodnÃ­ soubor pro Bash: <code>&quot;Å™etÄ›zec&quot;</code><sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h4>
<div class="m4-src"><pre id="m4-messages-doubleq-m4" title="pÅ™evodnÃ­ soubor pro Bash &quot;Å™etÄ›zce v uvozovkÃ¡ch&quot;"># A â†’ Î²
define([AMP], [&amp;])
define([AP], ['])
define([BQ], [\`])
define([BS], [\\])
define([DQ], [\"])
define([EX], ["\!"])
define([GT], [&gt;])
define([LT], [&lt;])</pre><code><span title="2020-01-06 16:21:10 +0100">b53eafe</span><a href="../messages/doubleq.m4" title="localhost:~/messages/doubleq.m4">doubleq.m4</a><a href="#m4-messages-doubleq-m4">ğŸ”—</a></code></div>
<h4 id="m4-prevodni-soubor-pro-bash-areteze" class="m4-bh"><a href="#m4-prevodni-soubor-pro-bash-areteze">ğŸ”—</a><code>[]</code> PÅ™evodnÃ­ soubor pro Bash: <code>&apos;Å™etÄ›zec&apos;</code><sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h4>
<div class="m4-src"><pre id="m4-messages-apost-m4" title="pÅ™evodnÃ­ soubor pro Bash 'Å™etÄ›zce v apostrofech'"># A â†’ Î²
define([AMP], [&amp;])
define([AP], ['\''])
define([BQ], [`])
define([BS], [\])
define([DQ], ["])
define([EX], [!])
define([GT], [&gt;])
define([LT], [&lt;])</pre><code><span title="2020-01-06 16:21:10 +0100">b53eafe</span><a href="../messages/apost.m4" title="localhost:~/messages/apost.m4">apost.m4</a><a href="#m4-messages-apost-m4">ğŸ”—</a></code></div>
<h4 id="m4-prevodni-soubor-pro-csv-m4-vrati" class="m4-bh"><a href="#m4-prevodni-soubor-pro-csv-m4-vrati">ğŸ”—</a><code>[]</code> PÅ™evodnÃ­ soubor pro CSV, M4 (vrÃ¡tÃ­ vÅ¡echny znaky zpÃ¡tky)<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h4>
<div class="m4-src"><pre id="m4-messages-unchanged-m4" title="pÅ™evodnÃ­ soubor vrÃ¡tÃ­ vÅ¡echny speciÃ¡lnÃ­ znaky zpÃ¡tky"># A â†’ Î²
define([AMP], [&amp;])
define([AP], ['])
define([BQ], [`])
define([BS], [\])
define([DQ], ["])
define([EX], [!])
define([GT], [&gt;])
define([LT], [&lt;])</pre><code><span title="2020-01-10 04:42:49 +0100">f175bef</span><a href="../messages/unchanged.m4" title="localhost:~/messages/unchanged.m4">unchanged.m4</a><a href="#m4-messages-unchanged-m4">ğŸ”—</a></code></div>
<h3 id="m4-c-vystupni-fronta" class="m4-ch"><a href="#m4-toc-c-vystupni-fronta" title="Obsah">â˜°</a><a href="#m4-c-vystupni-fronta" title="ğŸ”—">A.5</a><code>[]</code> C â€“ vÃ½stupnÃ­ fronta<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h3>
<p>PÅ™Ã­klad pouÅ¾Ã­vÃ¡ jednu vÃ½stupnÃ­ frontu na znaky <code>};</code> pro uzavÅ™enÃ­ pole na konci skriptu.</p>
<div class="m4-src"><pre id="m4-messages-array-c-m4"># A â†’ Î²
define([ERROR], [

	divert(0)dnl
	"$2",
divert(-1)
])

divert(0)dnl
/*
 * DONTE()
 */

char *error[[]] = {
divert(1)dnl
};
divert(-1)</pre><code><span title="2020-01-06 16:21:10 +0100">b53eafe</span><a href="../messages/array.c.m4" title="localhost:~/messages/array.c.m4">array.c.m4</a><a href="#m4-messages-array-c-m4">ğŸ”—</a></code></div>
<div title="pÅ™Ã­kaz" class="m4-usc">m4 <a href="../gfiles/rootb.m4" title="localhost:~/gfiles/rootb.m4">rootb.m4</a> <a href="../messages/array.c.m4" title="localhost:~/messages/array.c.m4">array.c.m4</a> <a href="../messages/code.m4" title="localhost:~/messages/code.m4">code.m4</a> <a href="../messages/messages.mc" title="localhost:~/messages/messages.mc">messages.mc</a> &gt; <a href="../messages/array.c" title="localhost:~/messages/array.c">array.c</a></div>
<div class="m4-src"><pre id="m4-messages-array-c">/*
 * DO NOT EDIT! This file is generated automatically!
 */

char *error[] = {
	"!\"#$%&amp;'()*+,-./:;&lt;=&gt;?@[\\]^_`{|}~",
	"Complex M4 code failed successfully.",
	"It's not a language fault!",
};</pre><code><span title="2020-01-06 16:21:10 +0100">b53eafe</span><a href="../messages/array.c" title="localhost:~/messages/array.c">array.c</a><a href="#m4-messages-array-c">ğŸ”—</a></code></div>
<h3 id="m4-ini-externi-prikaz" class="m4-ch"><a href="#m4-toc-ini-externi-prikaz" title="Obsah">â˜°</a><a href="#m4-ini-externi-prikaz" title="ğŸ”—">A.6</a><code>[]</code> INI â€“ externÃ­ pÅ™Ã­kaz<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h3>
<p>PÅ™Ã­klad spustÃ­ externÃ­ pÅ™Ã­kaz <code>date</code> a&nbsp;jeho vÃ½stup umÃ­stÃ­ do hranatÃ½ch zÃ¡vorek.
VÃ½stupem externÃ­ho pÅ™Ã­kazu jsou dvÄ› poloÅ¾ky oddÄ›lenÃ© ÄÃ¡rkou.
Makro <code>ARG1()</code> vybere prvnÃ­ poloÅ¾ku, protoÅ¾e druhÃ¡ poloÅ¾ka obsahuje neÅ¾Ã¡doucÃ­ znak novÃ©ho Å™Ã¡dku <code>LF</code> (<samp>0x0a</samp>).</p>
<div class="m4-src"><pre id="m4-messages-hello-ini-m4"># A â†’ Î²
define([ERROR], [

	divert(0)dnl
[$1]="$2"
divert(-1)
])

divert(0)dnl
; DONTE()

LB()ARG1(esyscmd([date '+[hello_%Y%m%d],']))]
divert(-1)</pre><code><span title="2020-02-11 02:32:35 +0100">9e13656</span><a href="../messages/hello.ini.m4" title="localhost:~/messages/hello.ini.m4">hello.ini.m4</a><a href="#m4-messages-hello-ini-m4">ğŸ”—</a></code></div>
<div title="pÅ™Ã­kaz" class="m4-usc">m4 <a href="../gfiles/rootb.m4" title="localhost:~/gfiles/rootb.m4">rootb.m4</a> <a href="../messages/hello.ini.m4" title="localhost:~/messages/hello.ini.m4">hello.ini.m4</a> <a href="../messages/code.m4" title="localhost:~/messages/code.m4">code.m4</a> <a href="../messages/messages.mc" title="localhost:~/messages/messages.mc">messages.mc</a> &gt; <a href="../messages/hello.ini" title="localhost:~/messages/hello.ini">hello.ini</a></div>
<div class="m4-src"><pre id="m4-messages-hello-ini">; DO NOT EDIT! This file is generated automatically!

[hello_20200328]
COMPLEX="!\"#$%&amp;'()*+,-./:;&lt;=&gt;?@[\\]^_`{|}~"
SUCCESS="Complex M4 code failed successfully."
NOFAULT="It's not a language fault!"</pre><code><span title="2020-03-29 23:45:31 +0200">3e0af85</span><a href="../messages/hello.ini" title="localhost:~/messages/hello.ini">hello.ini</a><a href="#m4-messages-hello-ini">ğŸ”—</a></code></div>
<h3 id="m4-h-hex-pocitadlo" class="m4-ch"><a href="#m4-toc-h-hex-pocitadlo" title="Obsah">â˜°</a><a href="#m4-h-hex-pocitadlo" title="ğŸ”—">A.7</a><code>[]</code> .h â€“ hex poÄÃ­tadlo<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h3>
<p>PÅ™Ã­klad pouÅ¾Ã­vÃ¡ makro <code>COUNTER</code> pro ÄÃ­slovÃ¡nÃ­ vÃ½slednÃ½ch <abbr title="Preprocesor jazyka C">CPP</abbr> maker a&nbsp;jednu vÃ½stupnÃ­ frontu.
Fronta ÄÃ­slo <code>1</code> obsahuje direktivu preprocesoru <code>#endif</code> pro zakonÄenÃ­ hlaviÄkovÃ©ho souboru.
PÅ™evod dekadickÃ© hodnoty poÄÃ­tadla na dvoumÃ­stnÃ© hex-a ÄÃ­slo provÃ¡dÃ­ klÃ­ÄovÃ© slovo <code>eval()</code>.</p>
<div class="m4-src"><pre id="m4-messages-messages-h-m4"># A â†’ Î²
define([COUNTER], defn([COUNT_UP]))

# init counter
COUNTER(0)

# A â†’ Î²
define([ERROR], [

	divert(0)dnl
[#define $1		0x]eval(COUNTER, 16, 2)
divert(-1)
])

divert(0)dnl
/*
 * DONTE()
 */

#ifndef __ERROR_H
#define __ERROR_H

divert(1)
#endif /* __ERROR_H */
divert(-1)</pre><code><span title="2020-01-06 16:21:10 +0100">b53eafe</span><a href="../messages/messages.h.m4" title="localhost:~/messages/messages.h.m4">messages.h.m4</a><a href="#m4-messages-messages-h-m4">ğŸ”—</a></code></div>
<div title="pÅ™Ã­kaz" class="m4-usc">m4 <a href="../gfiles/rootb.m4" title="localhost:~/gfiles/rootb.m4">rootb.m4</a> <a href="../messages/messages.h.m4" title="localhost:~/messages/messages.h.m4">messages.h.m4</a> <a href="../messages/messages.mc" title="localhost:~/messages/messages.mc">messages.mc</a> &gt; <a href="../messages/messages.h" title="localhost:~/messages/messages.h">messages.h</a></div>
<div class="m4-src"><pre id="m4-messages-messages-h">/*
 * DO NOT EDIT! This file is generated automatically!
 */

#ifndef __ERROR_H
#define __ERROR_H

#define COMPLEX		0x00
#define SUCCESS		0x01
#define NOFAULT		0x02

#endif /* __ERROR_H */</pre><code><span title="2020-01-06 16:21:10 +0100">b53eafe</span><a href="../messages/messages.h" title="localhost:~/messages/messages.h">messages.h</a><a href="#m4-messages-messages-h">ğŸ”—</a></code></div>
<h3 id="m4-c-maly-automat" class="m4-ch"><a href="#m4-toc-c-maly-automat" title="Obsah">â˜°</a><a href="#m4-c-maly-automat" title="ğŸ”—">A.8</a><code>[]</code> C â€“ malÃ½ automat<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h3>
<p>PÅ™Ã­klad pouÅ¾Ã­vÃ¡ malÃ½ automat <code>NEW_LINE</code> pro generovÃ¡nÃ­ znaku novÃ©ho Å™Ã¡dku <code>\n</code> a&nbsp;jednu vÃ½stupnÃ­ frontu ÄÃ­slo <code>1</code> do kterÃ© se vloÅ¾Ã­ znaky <code>";</code> pro uzavÅ™enÃ­ vÃ½slednÃ©ho Å™etÄ›zce.
PoprvÃ© se <code>NEW_LINE</code> pÅ™epÃ­Å¡e na <abbr title="epsilon â€“ prÃ¡zdnÃ½ symbol"><code>Îµ</code></abbr>, podruhÃ© a dÃ¡le se pÅ™epÃ­Å¡e na <code>\n</code>.</p>
<div class="m4-src"><pre id="m4-messages-stringl-c-m4">#     NEW_LINE automaton
#      ___      ____
# ---&gt;/ Îµ \---&gt;/ \n \---.
#     \___/    \____/&lt;--'

# A â†’ Î²
define([NEW_LINE], [define([$0], [\n])])

# A â†’ Î²
define([ERROR], [

	divert(0)NEW_LINE[]$2[]dnl
divert(-1)
])

divert(0)dnl
/*
 * DONTE()
 */

char error[[]] =
"divert(1)";
divert(-1)</pre><code><span title="2020-01-06 16:21:10 +0100">b53eafe</span><a href="../messages/stringl.c.m4" title="localhost:~/messages/stringl.c.m4">stringl.c.m4</a><a href="#m4-messages-stringl-c-m4">ğŸ”—</a></code></div>
<div title="pÅ™Ã­kaz" class="m4-usc">m4 <a href="../gfiles/rootb.m4" title="localhost:~/gfiles/rootb.m4">rootb.m4</a> <a href="../messages/stringl.c.m4" title="localhost:~/messages/stringl.c.m4">stringl.c.m4</a> <a href="../messages/code.m4" title="localhost:~/messages/code.m4">code.m4</a> <a href="../messages/messages.mc" title="localhost:~/messages/messages.mc">messages.mc</a> &gt; <a href="../messages/stringl.c" title="localhost:~/messages/stringl.c">stringl.c</a></div>
<div class="m4-src"><pre id="m4-messages-stringl-c">/*
 * DO NOT EDIT! This file is generated automatically!
 */

char error[] =
"!\"#$%&amp;'()*+,-./:;&lt;=&gt;?@[\\]^_`{|}~\nComplex M4 code failed successfully.\nIt's not a language fault!";</pre><code><span title="2020-01-06 16:21:10 +0100">b53eafe</span><a href="../messages/stringl.c" title="localhost:~/messages/stringl.c">stringl.c</a><a href="#m4-messages-stringl-c">ğŸ”—</a></code></div>
<h3 id="m4-c-maly-automat-2" class="m4-ch"><a href="#m4-toc-c-maly-automat-2" title="Obsah">â˜°</a><a href="#m4-c-maly-automat-2" title="ğŸ”—">A.9</a><code>[]</code> C â€“ malÃ½ automat 2<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h3>
<p>Tento pÅ™Ã­klad je podobnÃ½ pÅ™edchozÃ­mu, avÅ¡ak kaÅ¾dÃ½ Å™etÄ›zec je na novÃ©m Å™Ã¡dku.</p>
<div class="m4-src"><pre id="m4-messages-string-c-m4">#      NEW_LINE automaton
#      ___      ________
# ---&gt;/ Îµ \---&gt;/ \n"LF" \---.
#     \___/    \________/&lt;--'

# A â†’ Î²
define([NEW_LINE], [define([$0], [\n"
"])])

# A â†’ Î²
define([ERROR], [

	divert(0)NEW_LINE[]$2[]dnl
divert(-1)
])

divert(0)dnl
/*
 * DONTE()
 */

char error[[]] =
"divert(1)";
divert(-1)</pre><code><span title="2020-01-06 16:21:10 +0100">b53eafe</span><a href="../messages/string.c.m4" title="localhost:~/messages/string.c.m4">string.c.m4</a><a href="#m4-messages-string-c-m4">ğŸ”—</a></code></div>
<div title="pÅ™Ã­kaz" class="m4-usc">m4 <a href="../gfiles/rootb.m4" title="localhost:~/gfiles/rootb.m4">rootb.m4</a> <a href="../messages/string.c.m4" title="localhost:~/messages/string.c.m4">string.c.m4</a> <a href="../messages/code.m4" title="localhost:~/messages/code.m4">code.m4</a> <a href="../messages/messages.mc" title="localhost:~/messages/messages.mc">messages.mc</a> &gt; <a href="../messages/string.c" title="localhost:~/messages/string.c">string.c</a></div>
<div class="m4-src"><pre id="m4-messages-string-c">/*
 * DO NOT EDIT! This file is generated automatically!
 */

char error[] =
"!\"#$%&amp;'()*+,-./:;&lt;=&gt;?@[\\]^_`{|}~\n"
"Complex M4 code failed successfully.\n"
"It's not a language fault!";</pre><code><span title="2020-01-06 16:21:10 +0100">b53eafe</span><a href="../messages/string.c" title="localhost:~/messages/string.c">string.c</a><a href="#m4-messages-string-c">ğŸ”—</a></code></div>
<h3 id="m4-html-vystupni-fronty" class="m4-ch"><a href="#m4-toc-html-vystupni-fronty" title="Obsah">â˜°</a><a href="#m4-html-vystupni-fronty" title="ğŸ”—">A.10</a><code>[]</code> HTML â€“ vÃ½stupnÃ­ fronty<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h3>
<p>PÅ™Ã­klad pouÅ¾Ã­vÃ¡ dvÄ› vÃ½stupnÃ­ fronty.
Fronta ÄÃ­slo <code>1</code> obsahuje odstavce, fronta ÄÃ­slo <code>2</code> uzavÃ­racÃ­ znaÄky HTML strÃ¡nky.
NavigaÄnÃ­ odkazy nemusÃ­ bÃ½t nikde uloÅ¾eny, jdou pÅ™Ã­mo na vÃ½stup.
ZprÃ¡vy typu <code>QUERY</code> a&nbsp;<code>WARNING</code> jsou zpracovÃ¡ny stejnÄ› jako zprÃ¡vy typu <code>ERROR</code>.</p>
<div class="m4-src"><pre id="m4-messages-messages-html-m4"># vim:ft=m4

# A â†’ Î²
# Î²
define([ERROR], [

	divert(0)dnl
		[&lt;li&gt;$0: &lt;a href="#$1"&gt;$1&lt;/a&gt;&lt;/li&gt;]
divert(1)dnl
	&lt;p id="[$1]"&gt;$2&lt;/p&gt;
divert(-1)
])

# A â†’ Î²
define([QUERY], defn([ERROR]))
define([WARNING], defn([ERROR]))

divert(0)dnl
&lt;!-- DONTE() --&gt;
&lt;!doctype html&gt;
&lt;html lang="en"&gt;
	&lt;meta charset="utf-8"&gt;
	&lt;title&gt;__file__&lt;/title&gt;
&lt;body&gt;
	&lt;h1&gt;The power of M4&lt;/h1&gt;
	&lt;ul&gt;
divert(1)dnl
	&lt;/ul&gt;
divert(2)dnl
&lt;/body&gt;
&lt;/html&gt;
divert(-1)</pre><code><span title="2020-01-06 16:21:10 +0100">b53eafe</span><a href="../messages/messages.html.m4" title="localhost:~/messages/messages.html.m4">messages.html.m4</a><a href="#m4-messages-messages-html-m4">ğŸ”—</a></code></div>
<div title="pÅ™Ã­kaz" class="m4-usc">m4 <a href="../gfiles/rootb.m4" title="localhost:~/gfiles/rootb.m4">rootb.m4</a> <a href="../messages/messages.html.m4" title="localhost:~/messages/messages.html.m4">messages.html.m4</a> <a href="../messages/markup.m4" title="localhost:~/messages/markup.m4">markup.m4</a> <a href="../messages/messages.mc" title="localhost:~/messages/messages.mc">messages.mc</a> &gt; <a href="../messages/messages.html" title="localhost:~/messages/messages.html">messages.html</a></div>
<div class="m4-src"><pre id="m4-messages-messages-html">&lt;!-- DO NOT EDIT! This file is generated automatically! --&gt;
&lt;!doctype html&gt;
&lt;html lang="en"&gt;
	&lt;meta charset="utf-8"&gt;
	&lt;title&gt;messages.html.m4&lt;/title&gt;
&lt;body&gt;
	&lt;h1&gt;The power of M4&lt;/h1&gt;
	&lt;ul&gt;
		&lt;li&gt;ERROR: &lt;a href="#COMPLEX"&gt;COMPLEX&lt;/a&gt;&lt;/li&gt;
		&lt;li&gt;QUERY: &lt;a href="#READABLE"&gt;READABLE&lt;/a&gt;&lt;/li&gt;
		&lt;li&gt;ERROR: &lt;a href="#SUCCESS"&gt;SUCCESS&lt;/a&gt;&lt;/li&gt;
		&lt;li&gt;WARNING: &lt;a href="#ADDICTIVE"&gt;ADDICTIVE&lt;/a&gt;&lt;/li&gt;
		&lt;li&gt;ERROR: &lt;a href="#NOFAULT"&gt;NOFAULT&lt;/a&gt;&lt;/li&gt;
		&lt;li&gt;WARNING: &lt;a href="#NO_ERRORS"&gt;NO_ERRORS&lt;/a&gt;&lt;/li&gt;
	&lt;/ul&gt;
	&lt;p id="COMPLEX"&gt;!"#$%&amp;amp;'()*+,-./:;&amp;lt;=&amp;gt;?@[\]^_`{|}~&lt;/p&gt;
	&lt;p id="READABLE"&gt;Is badly written M4 code readable [N/y]?&lt;/p&gt;
	&lt;p id="SUCCESS"&gt;Complex M4 code failed successfully.&lt;/p&gt;
	&lt;p id="ADDICTIVE"&gt;Programming in M4 is addictive!&lt;/p&gt;
	&lt;p id="NOFAULT"&gt;It's not a language fault!&lt;/p&gt;
	&lt;p id="NO_ERRORS"&gt;No other errors detected.&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;</pre><code><span title="2020-01-06 16:21:10 +0100">b53eafe</span><a href="../messages/messages.html" title="localhost:~/messages/messages.html">messages.html</a><a href="#m4-messages-messages-html">ğŸ”—</a></code></div>
<h3 id="m4-vetveni-gramatikou" class="m4-ch"><a href="#m4-toc-vetveni-gramatikou" title="Obsah">â˜°</a><a href="#m4-vetveni-gramatikou" title="ğŸ”—">A.11</a><code>[]</code> VÄ›tvenÃ­ gramatikou<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h3>
<p>PÅ™Ã­klad ukazuje <a href="#m4-nonterminals-for-branches">vÄ›tvenÃ­ gramatikou</a>, argumenty maker se ignorujÃ­.
VstupnÃ­ neterminÃ¡ly se pÅ™episujÃ­ na terminÃ¡ly <code title="ğŸ›">ERROR â†’ ğŸ›</code>, <code title="ğŸœ">QUERY â†’ ğŸœ</code>, <code title="ğŸ">WARNING â†’ ğŸ</code>.</p>
<div class="m4-src"><pre id="m4-messages-insect-txt-m4"># A â†’ Î²
# Î²
define([ERROR], [

	divert(0)dnl
$0_INSECT[]dnl
divert(-1)
])

# A â†’ Î²
define([QUERY],   defn([ERROR]))
define([WARNING], defn([ERROR]))
define([ERROR_INSECT],   [ğŸ›])
define([QUERY_INSECT],   [ğŸœ])
define([WARNING_INSECT], [ğŸ])</pre><code><span title="2020-01-06 16:21:10 +0100">b53eafe</span><a href="../messages/insect.txt.m4" title="localhost:~/messages/insect.txt.m4">insect.txt.m4</a><a href="#m4-messages-insect-txt-m4">ğŸ”—</a></code></div>
<div title="pÅ™Ã­kaz" class="m4-usc">m4 <a href="../gfiles/rootb.m4" title="localhost:~/gfiles/rootb.m4">rootb.m4</a> <a href="../messages/insect.txt.m4" title="localhost:~/messages/insect.txt.m4">insect.txt.m4</a> <a href="../messages/messages.mc" title="localhost:~/messages/messages.mc">messages.mc</a> &gt; <a href="../messages/insect.txt" title="localhost:~/messages/insect.txt">insect.txt</a></div>
<div class="m4-src"><pre id="m4-messages-insect-txt">ğŸ›ğŸœğŸ›ğŸğŸ›ğŸ</pre><code><span title="2020-01-06 16:21:10 +0100">b53eafe</span><a href="../messages/insect.txt" title="localhost:~/messages/insect.txt">insect.txt</a><a href="#m4-messages-insect-txt">ğŸ”—</a></code></div>
<h3 id="m4-json-generujici-automat" class="m4-ch"><a href="#m4-toc-json-generujici-automat" title="Obsah">â˜°</a><a href="#m4-json-generujici-automat" title="ğŸ”—">A.12</a><code>[]</code> JSON â€“ generujÃ­cÃ­ automat<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h3>
<p>PÅ™Ã­klad pouÅ¾Ã­vÃ¡ dvÄ› vÃ½stupnÃ­ fronty a&nbsp;jeden generujÃ­cÃ­ automat.
PrvnÃ­ chybovÃ¡ zprÃ¡va <code>ERROR([â€¦])</code> ve stavu <code>ERROR</code> vygeneruje zÃ¡hlavÃ­ se zÃ¡vorkami a&nbsp;vypÃ­Å¡e na vÃ½stup prvnÃ­ zÃ¡znam.
Automat pÅ™ejde do stavu <code>NEXT_ITEM</code> coÅ¾ je <abbr title="takovÃ© pravidlo se pouÅ¾Ã­vÃ¡ jako pravÃ¡ strana jinÃ©ho pÅ™episovacÃ­ho pravidla"><code>Î²</code> pravidlo</abbr>.
NÃ¡sledujÃ­cÃ­ chybovÃ© zprÃ¡vy ve stavu <code>NEXT_ITEM</code> pouze vypisujÃ­ na vÃ½stup jednotlivÃ© zÃ¡znamy.
Na zÃ¡vÄ›r vÃ½stupnÃ­ fronty ÄÃ­slo <code>1</code> a&nbsp;<code>2</code> vypÃ­Å¡ou znaky <code>]</code> a&nbsp;<code>}}</code> ÄÃ­mÅ¾ zakonÄÃ­ vÃ½slednÃ½ JSON.</p>
<div class="m4-src"><pre id="m4-messages-atm-json-m4">#      _______      ___________
# ---&gt;/ ERROR \---&gt;/ NEXT_ITEM \---.
#     \_______/    \___________/&lt;--'

# A â†’ Î²
define([ERROR], [

	# transition to the next node
	define([$0], defn([NEXT_ITEM]))

	divert(0),
	"error": LB()
		{"[$1]": "$2"}dnl
divert(1)
	RB()
divert(-1)
])

# Î²
define([NEXT_ITEM], [

	divert(0),
		{"[$1]": "$2"}dnl
divert(-1)
])

divert(0)dnl
{"generating_automaton": {
	"_comment": "DONTE()"dnl
divert(2)dnl
}}
divert(-1)</pre><code><span title="2020-01-06 16:21:10 +0100">b53eafe</span><a href="../messages/atm.json.m4" title="localhost:~/messages/atm.json.m4">atm.json.m4</a><a href="#m4-messages-atm-json-m4">ğŸ”—</a></code></div>
<div title="pÅ™Ã­kaz" class="m4-usc">m4 <a href="../gfiles/rootb.m4" title="localhost:~/gfiles/rootb.m4">rootb.m4</a> <a href="../messages/atm.json.m4" title="localhost:~/messages/atm.json.m4">atm.json.m4</a> <a href="../messages/code.m4" title="localhost:~/messages/code.m4">code.m4</a> <a href="../messages/messages.mc" title="localhost:~/messages/messages.mc">messages.mc</a> &gt; <a href="../messages/atm.json" title="localhost:~/messages/atm.json">atm.json</a></div>
<div class="m4-src"><pre id="m4-messages-atm-json">{"generating_automaton": {
	"_comment": "DO NOT EDIT! This file is generated automatically!",
	"error": [
		{"COMPLEX": "!\"#$%&amp;'()*+,-./:;&lt;=&gt;?@[\\]^_`{|}~"},
		{"SUCCESS": "Complex M4 code failed successfully."},
		{"NOFAULT": "It's not a language fault!"}
	]
}}</pre><code><span title="2020-01-06 16:21:10 +0100">b53eafe</span><a href="../messages/atm.json" title="localhost:~/messages/atm.json">atm.json</a><a href="#m4-messages-atm-json">ğŸ”—</a></code></div>
<h4 id="m4-json-pojmenovane-fronty" class="m4-ch"><a href="#m4-toc-json-pojmenovane-fronty" title="Obsah">â˜°</a><a href="#m4-json-pojmenovane-fronty" title="ğŸ”—">A.12.1</a><code>[]</code> JSON â€“ pojmenovanÃ© fronty<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h4>
<p>PÅ™Ã­klad zpracovÃ¡vÃ¡ dalÅ¡Ã­ zprÃ¡vy typu <code>QUERY</code> a&nbsp;<code>WARNING</code>.
PouÅ¾Ã­vÃ¡ tÅ™i automaty a&nbsp;Å¡est vÃ½stupnÃ­ch front.
Generujeme-li sloÅ¾itÄ›jÅ¡Ã­ zdrojovÃ½ kÃ³d, brzy narazÃ­me na problÃ©m udrÅ¾enÃ­ konzistence indexÅ¯ pro vÃ½stupnÃ­ fronty.
Abychom se vyhnuli zmatku, pojmenujeme si fronty a&nbsp;mÃ­sto ÄÃ­sel pouÅ¾Ã­vÃ¡me jmÃ©na.</p>
<p>Abychom nemuseli definovat podobnÃ¡ pravidla, zkopÃ­rujeme si pravou stranu <code>ERROR</code><br>(je to takÃ© <abbr title="takovÃ© pravidlo se pouÅ¾Ã­vÃ¡ jako pravÃ¡ strana jinÃ©ho pÅ™episovacÃ­ho pravidla"><code>Î²</code> pravidlo</abbr>) do pravÃ© strany pravidel <code>QUERY</code> a&nbsp;<code>WARNING</code>.
PromÄ›nnÃ¡ <code>$0</code> se pÅ™epÃ­Å¡e na jmÃ©no makra a&nbsp;zÅ™etÄ›zÃ­ se s&nbsp;dalÅ¡Ã­m symbolem.
NovÄ› vzniklÃ½ neterminÃ¡l se pÅ™epÃ­Å¡e na odpovÃ­dajÃ­cÃ­ terminÃ¡lnÃ­ symbol (ÄÃ­slo fronty nebo jmÃ©no).</p>
<div class="m4-src"><pre id="m4-nonterminals-for-branches" title="vÄ›tvenÃ­ gramatikou v M4">$0_QU â†’ ERROR_QU â†’ 2
$0_END â†’ ERROR_END â†’ 3
$0_NAME â†’ ERROR_NAME â†’ error
$0_QU â†’ QUERY_QU â†’ 0
$0_END â†’ QUERY_END â†’ 1
$0_NAME â†’ QUERY_NAME â†’ query
â€¦</pre><a href="#m4-nonterminals-for-branches">ğŸ”—</a></div>
<div class="m4-src"><pre id="m4-messages-qnames-json-m4"># DO NOT WRITE INDEXES MANUALLY, use counter!
define([QUERY_QU],     0)
define([QUERY_END],    1)
define([ERROR_QU],     2)
define([ERROR_END],    3)
define([WARNING_QU],   4)
define([WARNING_END],  5)
define([LAST_QUEUE],   6)

# names of message types
define([WARNING_NAME], [warning])
define([ERROR_NAME],   [error])
define([QUERY_NAME],   [query])

#      _________      ___________
# ---&gt;/  ERROR  \---&gt;/ NEXT_ITEM \---.
#     |  QUERY  |    \___________/&lt;--'
#     \_WARNING_/

# A â†’ Î²
# Î²
define([ERROR], [

	# transition to the next node
	define([$0], defn([NEXT_ITEM]))

	divert($0_QU),
	"$0_NAME": LB()
		{"[$1]": "$2"}dnl
divert($0_END)
	RB()dnl
divert(-1)
])

# Î²
define([NEXT_ITEM], [

	divert($0_QU),
		{"[$1]": "$2"}dnl
divert(-1)
])

# A â†’ Î²
define([QUERY],        defn([ERROR]))
define([WARNING],      defn([ERROR]))

divert(0)dnl
{"queue_names": {
	"_comment": "DONTE()"dnl
divert(LAST_QUEUE)
}}
divert(-1)</pre><code><span title="2020-01-06 16:21:10 +0100">b53eafe</span><a href="../messages/qnames.json.m4" title="localhost:~/messages/qnames.json.m4">qnames.json.m4</a><a href="#m4-messages-qnames-json-m4">ğŸ”—</a></code></div>
<div title="pÅ™Ã­kaz" class="m4-usc">m4 <a href="../gfiles/rootb.m4" title="localhost:~/gfiles/rootb.m4">rootb.m4</a> <a href="../messages/qnames.json.m4" title="localhost:~/messages/qnames.json.m4">qnames.json.m4</a> <a href="../messages/code.m4" title="localhost:~/messages/code.m4">code.m4</a> <a href="../messages/messages.mc" title="localhost:~/messages/messages.mc">messages.mc</a> &gt; <a href="../messages/qnames.json" title="localhost:~/messages/qnames.json">qnames.json</a></div>
<div class="m4-src"><pre id="m4-messages-qnames-json">{"queue_names": {
	"_comment": "DO NOT EDIT! This file is generated automatically!",
	"query": [
		{"READABLE": "Is badly written M4 code readable [N/y]?"}
	],
	"error": [
		{"COMPLEX": "!\"#$%&amp;'()*+,-./:;&lt;=&gt;?@[\\]^_`{|}~"},
		{"SUCCESS": "Complex M4 code failed successfully."},
		{"NOFAULT": "It's not a language fault!"}
	],
	"warning": [
		{"ADDICTIVE": "Programming in M4 is addictive!"},
		{"NO_ERRORS": "No other errors detected."}
	]
}}</pre><code><span title="2020-01-06 16:21:10 +0100">b53eafe</span><a href="../messages/qnames.json" title="localhost:~/messages/qnames.json">qnames.json</a><a href="#m4-messages-qnames-json">ğŸ”—</a></code></div>
<h4 id="m4-json-generovane-indexy-front" class="m4-ch"><a href="#m4-toc-json-generovane-indexy-front" title="Obsah">â˜°</a><a href="#m4-json-generovane-indexy-front" title="ğŸ”—">A.12.2</a><code>[]</code> JSON â€“ generovanÃ© indexy front<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h4>
<p>BÄ›hem vÃ½voje se Äasto mÄ›nÃ­ poÅ™adÃ­ a&nbsp;poÄet vÃ½stupnÃ­ch front, coÅ¾ takÃ© vyÅ¾aduje Äastou zmÄ›nu jejich indexÅ¯.
Indexy je proto vhodnÃ© generovat.
MÅ¯Å¾eme pak pouÅ¾Ã­vat prakticky neomezenÃ½ poÄet front.
NÃ¡sledujÃ­cÃ­ pÅ™Ã­klad ukazuje, jak se tyto indexy generujÃ­.</p>
<div class="m4-src"><pre id="m4-messages-queues-m4"># defines a counter for output queues
# A â†’ Î²
define([QUEUE_INDEX], defn([COUNT_UP]))

# initial index of the first output queue
QUEUE_INDEX(0)

# symbolic names for indices of output queues
# A â†’ Î²
define([QUERY_QU],     QUEUE_INDEX)
define([QUERY_END],    QUEUE_INDEX)
define([ERROR_QU],     QUEUE_INDEX)
define([ERROR_END],    QUEUE_INDEX)
define([WARNING_QU],   QUEUE_INDEX)
define([WARNING_END],  QUEUE_INDEX)
# Keep it last!
define([LAST_QUEUE],   QUEUE_INDEX)

# names of message types
# A â†’ Î²
define([WARNING_NAME], [warning])
define([ERROR_NAME],   [error])
define([QUERY_NAME],   [query])</pre><code><span title="2020-01-06 16:21:10 +0100">b53eafe</span><a href="../messages/queues.m4" title="localhost:~/messages/queues.m4">queues.m4</a><a href="#m4-messages-queues-m4">ğŸ”—</a></code></div>
<div class="m4-src"><pre id="m4-messages-messages-json-m4">#      _________      ___________
# ---&gt;/  ERROR  \---&gt;/ NEXT_ITEM \---.
#     |  QUERY  |    \___________/&lt;--'
#     \_WARNING_/

# A â†’ Î²
# Î²
define([ERROR], [

	# transition to the next node
	define([$0], defn([NEXT_ITEM]))

	divert($0_QU),
	"$0_NAME": LB()
		{"[$1]": "$2"}dnl
divert($0_END)
	RB()dnl
divert(-1)
])

# Î²
define([NEXT_ITEM], [

	divert($0_QU),
		{"[$1]": "$2"}dnl
divert(-1)
])

# A â†’ Î²
define([QUERY],   defn([ERROR]))
define([WARNING], defn([ERROR]))

divert(0)dnl
{"messages": {
	"_comment": "DONTE()"dnl
divert(LAST_QUEUE)
}}
divert(-1)</pre><code><span title="2020-01-06 16:21:10 +0100">b53eafe</span><a href="../messages/messages.json.m4" title="localhost:~/messages/messages.json.m4">messages.json.m4</a><a href="#m4-messages-messages-json-m4">ğŸ”—</a></code></div>
<div title="pÅ™Ã­kaz" class="m4-usc">m4 <a href="../gfiles/rootb.m4" title="localhost:~/gfiles/rootb.m4">rootb.m4</a> <a href="../messages/queues.m4" title="localhost:~/messages/queues.m4">queues.m4</a> <a href="../messages/messages.json.m4" title="localhost:~/messages/messages.json.m4">messages.json.m4</a> <a href="../messages/code.m4" title="localhost:~/messages/code.m4">code.m4</a> <a href="../messages/messages.mc" title="localhost:~/messages/messages.mc">messages.mc</a> &gt; <a href="../messages/messages.json" title="localhost:~/messages/messages.json">messages.json</a></div>
<div class="m4-src"><pre id="m4-messages-messages-json">{"messages": {
	"_comment": "DO NOT EDIT! This file is generated automatically!",
	"query": [
		{"READABLE": "Is badly written M4 code readable [N/y]?"}
	],
	"error": [
		{"COMPLEX": "!\"#$%&amp;'()*+,-./:;&lt;=&gt;?@[\\]^_`{|}~"},
		{"SUCCESS": "Complex M4 code failed successfully."},
		{"NOFAULT": "It's not a language fault!"}
	],
	"warning": [
		{"ADDICTIVE": "Programming in M4 is addictive!"},
		{"NO_ERRORS": "No other errors detected."}
	]
}}</pre><code><span title="2020-01-06 16:21:10 +0100">b53eafe</span><a href="../messages/messages.json" title="localhost:~/messages/messages.json">messages.json</a><a href="#m4-messages-messages-json">ğŸ”—</a></code></div>
<h3 id="m4-ini-nespojity-index-front" class="m4-ch"><a href="#m4-toc-ini-nespojity-index-front" title="Obsah">â˜°</a><a href="#m4-ini-nespojity-index-front" title="ğŸ”—">A.13</a><code>[]</code> INI â€“ nespojitÃ½ index front<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h3>
<p>PÅ™Ã­klad pouÅ¾Ã­vÃ¡ tÅ™i automaty a&nbsp;dvÄ› vÃ½stupnÃ­ fronty ÄÃ­slo <code>2</code> a&nbsp;<code>4</code> definovanÃ© v&nbsp;oddÄ›lenÃ©m souboru.
NÃ¡zvy INI sekcÃ­ jsou generovÃ¡ny Å™etÄ›zenÃ­m symbolÅ¯.
PÅ™Ã­klad pouÅ¾Ã­vÃ¡ stejnÃ½ soubor pro vÃ½stupnÃ­ fronty jako <a href="#m4-json-generovane-indexy-front" title="[] JSON â€“ generovanÃ© indexy front">pÅ™Ã­klad</a> pro generovÃ¡nÃ­ JSON.</p>
<div class="m4-src"><pre id="m4-messages-messages-ini-m4">#      _________      ___________
# ---&gt;/  ERROR  \---&gt;/ NEXT_ITEM \---.
#     |  QUERY  |    \___________/&lt;--'
#     \_WARNING_/

# A â†’ Î²
# Î²
define([ERROR], [

	divert($0_QU)
BRAC($0_NAME)
[$1]="$2"
divert(-1)

	# transition to the next node
	define([$0], defn([NEXT_ITEM]))
])

# A â†’ Î²
define([QUERY],   defn([ERROR]))
define([WARNING], defn([ERROR]))

# Î²
define([NEXT_ITEM], [

	divert($0_QU)dnl
[$1]="$2"
divert(-1)
])

divert(0)dnl
; DONTE()
divert(-1)</pre><code><span title="2020-01-17 01:43:51 +0100">c145bef</span><a href="../messages/messages.ini.m4" title="localhost:~/messages/messages.ini.m4">messages.ini.m4</a><a href="#m4-messages-messages-ini-m4">ğŸ”—</a></code></div>
<div title="pÅ™Ã­kaz" class="m4-usc">m4 <a href="../gfiles/rootb.m4" title="localhost:~/gfiles/rootb.m4">rootb.m4</a> <a href="../messages/messages.ini.m4" title="localhost:~/messages/messages.ini.m4">messages.ini.m4</a> <a href="../messages/queues.m4" title="localhost:~/messages/queues.m4">queues.m4</a> <a href="../messages/code.m4" title="localhost:~/messages/code.m4">code.m4</a> <a href="../messages/messages.mc" title="localhost:~/messages/messages.mc">messages.mc</a> &gt; <a href="../messages/messages.ini" title="localhost:~/messages/messages.ini">messages.ini</a></div>
<div class="m4-src"><pre id="m4-messages-messages-ini">; DO NOT EDIT! This file is generated automatically!

[query]
READABLE="Is badly written M4 code readable [N/y]?"

[error]
COMPLEX="!\"#$%&amp;'()*+,-./:;&lt;=&gt;?@[\\]^_`{|}~"
SUCCESS="Complex M4 code failed successfully."
NOFAULT="It's not a language fault!"

[warning]
ADDICTIVE="Programming in M4 is addictive!"
NO_ERRORS="No other errors detected."</pre><code><span title="2020-01-06 16:21:10 +0100">b53eafe</span><a href="../messages/messages.ini" title="localhost:~/messages/messages.ini">messages.ini</a><a href="#m4-messages-messages-ini">ğŸ”—</a></code></div>
<h3 id="m4-xml-smisene-zpravy" class="m4-ch"><a href="#m4-toc-xml-smisene-zpravy" title="Obsah">â˜°</a><a href="#m4-xml-smisene-zpravy" title="ğŸ”—">A.14</a><code>[]</code> XML â€“ smÃ­Å¡enÃ© zprÃ¡vy<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h3>
<p>PÅ™Ã­klad pouÅ¾Ã­vÃ¡ jednu vÃ½stupnÃ­ frontu ÄÃ­slo <code>1</code> pro uzavÃ­racÃ­ znaÄku <code>&lt;/messages&gt;</code>.</p>
<div class="m4-src"><pre id="m4-messages-mixed-xml-m4"># A â†’ Î²
# Î²
define([ERROR], [

	divert(0)dnl
	&lt;$0_NAME&gt;
		&lt;name&gt;[$1]&lt;/name&gt;
		&lt;value&gt;$2&lt;/value&gt;
	&lt;/$0_NAME&gt;
divert(-1)
])

# A â†’ Î²
define([QUERY], defn([ERROR]))
define([WARNING], defn([ERROR]))

divert(0)dnl
&lt;!-- DONTE() --&gt;
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;messages&gt;
divert(1)dnl
&lt;/messages&gt;
divert(-1)</pre><code><span title="2020-01-06 16:21:10 +0100">b53eafe</span><a href="../messages/mixed.xml.m4" title="localhost:~/messages/mixed.xml.m4">mixed.xml.m4</a><a href="#m4-messages-mixed-xml-m4">ğŸ”—</a></code></div>
<div title="pÅ™Ã­kaz" class="m4-usc">m4 <a href="../gfiles/rootb.m4" title="localhost:~/gfiles/rootb.m4">rootb.m4</a> <a href="../messages/queues.m4" title="localhost:~/messages/queues.m4">queues.m4</a> <a href="../messages/mixed.xml.m4" title="localhost:~/messages/mixed.xml.m4">mixed.xml.m4</a> <a href="../messages/markup.m4" title="localhost:~/messages/markup.m4">markup.m4</a> <a href="../messages/messages.mc" title="localhost:~/messages/messages.mc">messages.mc</a> &gt; <a href="../messages/mixed.xml" title="localhost:~/messages/mixed.xml">mixed.xml</a></div>
<div class="m4-src"><pre id="m4-messages-mixed-xml">&lt;!-- DO NOT EDIT! This file is generated automatically! --&gt;
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;messages&gt;
	&lt;error&gt;
		&lt;name&gt;COMPLEX&lt;/name&gt;
		&lt;value&gt;!"#$%&amp;amp;'()*+,-./:;&amp;lt;=&amp;gt;?@[\]^_`{|}~&lt;/value&gt;
	&lt;/error&gt;
	&lt;query&gt;
		&lt;name&gt;READABLE&lt;/name&gt;
		&lt;value&gt;Is badly written M4 code readable [N/y]?&lt;/value&gt;
	&lt;/query&gt;
	&lt;error&gt;
		&lt;name&gt;SUCCESS&lt;/name&gt;
		&lt;value&gt;Complex M4 code failed successfully.&lt;/value&gt;
	&lt;/error&gt;
	&lt;warning&gt;
		&lt;name&gt;ADDICTIVE&lt;/name&gt;
		&lt;value&gt;Programming in M4 is addictive!&lt;/value&gt;
	&lt;/warning&gt;
	&lt;error&gt;
		&lt;name&gt;NOFAULT&lt;/name&gt;
		&lt;value&gt;It's not a language fault!&lt;/value&gt;
	&lt;/error&gt;
	&lt;warning&gt;
		&lt;name&gt;NO_ERRORS&lt;/name&gt;
		&lt;value&gt;No other errors detected.&lt;/value&gt;
	&lt;/warning&gt;
&lt;/messages&gt;</pre><code><span title="2020-01-06 16:21:10 +0100">b53eafe</span><a href="../messages/mixed.xml" title="localhost:~/messages/mixed.xml">mixed.xml</a><a href="#m4-messages-mixed-xml">ğŸ”—</a></code></div>
<h3 id="m4-xml-oddelene-zpravy" class="m4-ch"><a href="#m4-toc-xml-oddelene-zpravy" title="Obsah">â˜°</a><a href="#m4-xml-oddelene-zpravy" title="ğŸ”—">A.15</a><code>[]</code> XML â€“ oddÄ›lenÃ© zprÃ¡vy<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h3>
<p>PÅ™Ã­klad seskupuje zprÃ¡vy podle jejich typu pomocÃ­ vÃ½stupnÃ­ch front.</p>
<div class="m4-src"><pre id="m4-messages-messages-xml-m4"># A â†’ Î²
# Î²
define([ERROR], [

	# transition to the next node
	define([$0], defn([NEXT_ITEM]))

	divert($0_QU)dnl
	&lt;$0_NAME&gt;
		&lt;item&gt;
			&lt;name&gt;[$1]&lt;/name&gt;
			&lt;value&gt;$2&lt;/value&gt;
		&lt;/item&gt;
divert($0_END)dnl
	&lt;/$0_NAME&gt;
divert(-1)
])

# Î²
define([NEXT_ITEM], [

	divert($0_QU)dnl
		&lt;item&gt;
			&lt;name&gt;[$1]&lt;/name&gt;
			&lt;value&gt;$2&lt;/value&gt;
		&lt;/item&gt;
divert(-1)
])

# A â†’ Î²
define([QUERY],        defn([ERROR]))
define([WARNING],      defn([ERROR]))

divert(0)dnl
&lt;!-- DONTE() --&gt;
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;messages&gt;
divert(LAST_QUEUE)dnl
&lt;/messages&gt;
divert(-1)</pre><code><span title="2020-01-06 16:21:10 +0100">b53eafe</span><a href="../messages/messages.xml.m4" title="localhost:~/messages/messages.xml.m4">messages.xml.m4</a><a href="#m4-messages-messages-xml-m4">ğŸ”—</a></code></div>
<div title="pÅ™Ã­kaz" class="m4-usc">m4 <a href="../gfiles/rootb.m4" title="localhost:~/gfiles/rootb.m4">rootb.m4</a> <a href="../messages/queues.m4" title="localhost:~/messages/queues.m4">queues.m4</a> <a href="../messages/messages.xml.m4" title="localhost:~/messages/messages.xml.m4">messages.xml.m4</a> <a href="../messages/markup.m4" title="localhost:~/messages/markup.m4">markup.m4</a> <a href="../messages/messages.mc" title="localhost:~/messages/messages.mc">messages.mc</a> &gt; <a href="../messages/messages.xml" title="localhost:~/messages/messages.xml">messages.xml</a></div>
<div class="m4-src"><pre id="m4-messages-messages-xml">&lt;!-- DO NOT EDIT! This file is generated automatically! --&gt;
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;messages&gt;
	&lt;query&gt;
		&lt;item&gt;
			&lt;name&gt;READABLE&lt;/name&gt;
			&lt;value&gt;Is badly written M4 code readable [N/y]?&lt;/value&gt;
		&lt;/item&gt;
	&lt;/query&gt;
	&lt;error&gt;
		&lt;item&gt;
			&lt;name&gt;COMPLEX&lt;/name&gt;
			&lt;value&gt;!"#$%&amp;amp;'()*+,-./:;&amp;lt;=&amp;gt;?@[\]^_`{|}~&lt;/value&gt;
		&lt;/item&gt;
		&lt;item&gt;
			&lt;name&gt;SUCCESS&lt;/name&gt;
			&lt;value&gt;Complex M4 code failed successfully.&lt;/value&gt;
		&lt;/item&gt;
		&lt;item&gt;
			&lt;name&gt;NOFAULT&lt;/name&gt;
			&lt;value&gt;It's not a language fault!&lt;/value&gt;
		&lt;/item&gt;
	&lt;/error&gt;
	&lt;warning&gt;
		&lt;item&gt;
			&lt;name&gt;ADDICTIVE&lt;/name&gt;
			&lt;value&gt;Programming in M4 is addictive!&lt;/value&gt;
		&lt;/item&gt;
		&lt;item&gt;
			&lt;name&gt;NO_ERRORS&lt;/name&gt;
			&lt;value&gt;No other errors detected.&lt;/value&gt;
		&lt;/item&gt;
	&lt;/warning&gt;
&lt;/messages&gt;</pre><code><span title="2020-01-06 16:21:10 +0100">b53eafe</span><a href="../messages/messages.xml" title="localhost:~/messages/messages.xml">messages.xml</a><a href="#m4-messages-messages-xml">ğŸ”—</a></code></div>
<h3 id="m4-bash-cmd-echo-dretezecd" class="m4-ch"><a href="#m4-toc-bash-cmd-echo-dretezecd" title="Obsah">â˜°</a><a href="#m4-bash-cmd-echo-dretezecd" title="ğŸ”—">A.16</a><code>[]</code> Bash <code>~]$ echo &quot;Å™etÄ›zec&quot;</code><sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h3>
<div class="m4-src"><pre id="m4-messages-doubleq-sh-m4"># A â†’ Î²
# Î²
define([ERROR], [

	divert(0)dnl
echo "$2"
divert(-1)
])

# A â†’ Î²
define([QUERY], defn([ERROR]))
define([WARNING], defn([ERROR]))

divert(0)dnl
#!/bin/bash
#
[#] DONTE()

divert(-1)</pre><code><span title="2020-01-06 16:21:10 +0100">b53eafe</span><a href="../messages/doubleq.sh.m4" title="localhost:~/messages/doubleq.sh.m4">doubleq.sh.m4</a><a href="#m4-messages-doubleq-sh-m4">ğŸ”—</a></code></div>
<div title="pÅ™Ã­kaz" class="m4-usc">m4 <a href="../gfiles/rootb.m4" title="localhost:~/gfiles/rootb.m4">rootb.m4</a> <a href="../messages/doubleq.sh.m4" title="localhost:~/messages/doubleq.sh.m4">doubleq.sh.m4</a> <a href="../messages/doubleq.m4" title="localhost:~/messages/doubleq.m4">doubleq.m4</a> <a href="../messages/messages.mc" title="localhost:~/messages/messages.mc">messages.mc</a> &gt; <a href="../messages/doubleq.sh" title="localhost:~/messages/doubleq.sh">doubleq.sh</a></div>
<div class="m4-src"><pre id="m4-messages-doubleq-sh">#!/bin/bash
#
# DO NOT EDIT! This file is generated automatically!

echo ""\!"\"#$%&amp;'()*+,-./:;&lt;=&gt;?@[\\]^_\`{|}~"
echo "Is badly written M4 code readable [N/y]?"
echo "Complex M4 code failed successfully."
echo "Programming in M4 is addictive"\!""
echo "It's not a language fault"\!""
echo "No other errors detected."</pre><code><span title="2020-01-10 13:31:12 +0100">d4b7733</span><a href="../messages/doubleq.sh" title="localhost:~/messages/doubleq.sh">doubleq.sh</a><a href="#m4-messages-doubleq-sh">ğŸ”—</a></code></div>
<h3 id="m4-bash-cmd-echo-aretezeca" class="m4-ch"><a href="#m4-toc-bash-cmd-echo-aretezeca" title="Obsah">â˜°</a><a href="#m4-bash-cmd-echo-aretezeca" title="ğŸ”—">A.17</a><code>[]</code> Bash <code>~]$ echo 'Å™etÄ›zec'</code><sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h3>
<div class="m4-src"><pre id="m4-messages-apost-sh-m4"># A â†’ Î²
# Î²
define([ERROR], [

	divert(0)dnl
echo '$2'
divert(-1)
])

# A â†’ Î²
define([QUERY], defn([ERROR]))
define([WARNING], defn([ERROR]))

divert(0)dnl
#!/bin/bash
#
[#] DONTE()

divert(-1)</pre><code><span title="2020-01-06 16:21:10 +0100">b53eafe</span><a href="../messages/apost.sh.m4" title="localhost:~/messages/apost.sh.m4">apost.sh.m4</a><a href="#m4-messages-apost-sh-m4">ğŸ”—</a></code></div>
<div title="pÅ™Ã­kaz" class="m4-usc">m4 <a href="../gfiles/rootb.m4" title="localhost:~/gfiles/rootb.m4">rootb.m4</a> <a href="../messages/apost.sh.m4" title="localhost:~/messages/apost.sh.m4">apost.sh.m4</a> <a href="../messages/apost.m4" title="localhost:~/messages/apost.m4">apost.m4</a> <a href="../messages/messages.mc" title="localhost:~/messages/messages.mc">messages.mc</a> &gt; <a href="../messages/apost.sh" title="localhost:~/messages/apost.sh">apost.sh</a></div>
<div class="m4-src"><pre id="m4-messages-apost-sh">#!/bin/bash
#
# DO NOT EDIT! This file is generated automatically!

echo '!"#$%&amp;'\''()*+,-./:;&lt;=&gt;?@[\]^_`{|}~'
echo 'Is badly written M4 code readable [N/y]?'
echo 'Complex M4 code failed successfully.'
echo 'Programming in M4 is addictive!'
echo 'It'\''s not a language fault!'
echo 'No other errors detected.'</pre><code><span title="2020-01-06 16:21:10 +0100">b53eafe</span><a href="../messages/apost.sh" title="localhost:~/messages/apost.sh">apost.sh</a><a href="#m4-messages-apost-sh">ğŸ”—</a></code></div>
<h2 id="m4-priklady-preprocesoru" class="m4-ch"><a href="#m4-toc-priklady-preprocesoru" title="Obsah">â˜°</a><a href="#m4-priklady-preprocesoru" title="ğŸ”—">B</a>PÅ™Ã­klady preprocesoru<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h2>
<div title="pro informaci" class="rs-tip-major m4-info">Znaky {<code>`'</code>, <code>[]</code>, <strong><code>â‚â†</code></strong>, <code>âŸ¦âŸ§</code>} v&nbsp;nÃ¡zvu pÅ™Ã­kladu <a href="#m4-rizeni-expanze-neterminalu" title="Å˜Ã­zenÃ­ expanze neterminÃ¡lÅ¯">Å™Ã­dÃ­ expanzi neterminÃ¡lÅ¯</a>.</div>
<p id="m4-toc-ba-preprocesor-jazyka-c-a-m4" class="m4-l2"><a href="#m4-ba-preprocesor-jazyka-c-a-m4"><b>B.1</b><code>`'</code> Preprocesor jazyka C&nbsp;a&nbsp;M4</a></p>
<p id="m4-toc-ba-css-vlozeni-souboru-komentar" class="m4-l2"><a href="#m4-ba-css-vlozeni-souboru-komentar"><b>B.2</b><code>`'</code> CSS â€“ vloÅ¾enÃ­ souboru, komentÃ¡Å™</a></p>
<p id="m4-toc-bash-netisknutelne-znaky" class="m4-l2"><a href="#m4-bash-netisknutelne-znaky"><b>B.3</b><strong><code>â‚â†</code></strong> Bash â€“ netisknutelnÃ© znaky</a></p>
<h3 id="m4-ba-preprocesor-jazyka-c-a-m4" class="m4-ch"><a href="#m4-toc-ba-preprocesor-jazyka-c-a-m4" title="Obsah">â˜°</a><a href="#m4-ba-preprocesor-jazyka-c-a-m4" title="ğŸ”—">B.1</a><code>`'</code> Preprocesor jazyka C&nbsp;a&nbsp;M4<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h3>
<p>Direktivy <a href="https://cs.wikipedia.org/wiki/Preprocesor_jazyka_C" title="Preprocesor jazyka C">CPP</a> jsou pro M4 jednoÅ™Ã¡dkovÃ½ komentÃ¡Å™, coÅ¾ brÃ¡nÃ­ neÅ¾Ã¡doucÃ­ expanzi stejnÄ› pojmenovanÃ½ch maker.
Definujeme-li bezpeÄnÄ›jÅ¡Ã­ makro <code>SAF()</code>, stejnÄ› pojmenovanÃ© makro <code>SAF ()</code> nebude pÅ™epsÃ¡no.
JmennÃ½ prostor <abbr title="Preprocesor jazyka C">CPP</abbr> tak <strong>mÅ¯Å¾e</strong> bÃ½t zcela oddÄ›len od jmennÃ©ho prostoru M4.
ProblematickÃ½ znak <code>`</code> je skryt do makra <code>LQ()</code>.
Apostrof <code>'</code> ve zdrojovÃ©m kÃ³du niÄemu nevadÃ­.
Apostrof uvnitÅ™ makra <code>ORD<del style="color:red"><span style="color:rgba(0,0,0,.75)">()</span></del></code> je skryt do makra <code>RQ()</code>.
VÅ¡imnÄ›te si jmen funkcÃ­ <code>define ()</code> nebo <code>ifelse ()</code> a&nbsp;kde je expandovÃ¡n <code>SYMBOL</code>.</p>
<div class="m4-src"><pre id="m4-preproc-file-c-m4"># ORDinary and SAFe macros have different expansion:

# A â†’ Î²
define(`ORD', `$0_M4 RQ()SYMBOL`'RQ()')
define(`SAF', `ifelse(`$#', `0', ``$0'', `($1) * ($1)	/* $0_M4 SYMBOL */')')

divert(0)dnl</pre><code><span title="2020-01-06 16:21:10 +0100">b53eafe</span><a href="../preproc/file.c.m4" title="localhost:~/preproc/file.c.m4">file.c.m4</a><a href="#m4-preproc-file-c-m4">ğŸ”—</a></code></div>
<div class="m4-src"><pre id="m4-preproc-file-c">/*
 * DONTE()
 */

#include &lt;stdio.h&gt;	/* CPP SYMBOL */

#define SYMBOL		/* CPP SYMBOL */
#define SAF(x)		((x) * ((x) - 1))	/* CPP SYMBOL */
#define ORD(x)		CPP SYMBOL x

int a = SAF (1 + 1);	/* CPP */
int b = SAF(2 + 2);	/* M4 */
char chr = 'x';
char foo[] = "Let's say: 'SYMBOL'";
char bar[] = "ORD (args, are, ignored)";

static void define (char *s) { puts(s);}
static void ifelse (char *s) { puts(s);}

int main(void)
{

#ifdef SYMBOL			/* SYMBOL */
	puts("LQ()SYMBOL'");	/* note: `LQ()SYMBOL' */
#endif

	define (foo);		/* SYMBOL */
	ifelse (bar);		/* SYMBOL() */

	return 0;
}</pre><code><span title="2020-01-06 16:21:10 +0100">b53eafe</span><a href="../preproc/file.c" title="localhost:~/preproc/file.c">file.c</a><a href="#m4-preproc-file-c">ğŸ”—</a></code></div>
<div title="pÅ™Ã­kaz" class="m4-usc">m4 -DSYMBOL='Hello, world!' <a href="../gfiles/rootq.m4" title="localhost:~/gfiles/rootq.m4">rootq.m4</a> <a href="../preproc/file.c.m4" title="localhost:~/preproc/file.c.m4">file.c.m4</a> <a href="../preproc/file.c" title="localhost:~/preproc/file.c">file.c</a> &gt; <a href="../preproc/preproc.file.c" title="localhost:~/preproc/preproc.file.c">preproc.file.c</a></div>
<div class="m4-src"><pre id="m4-preproc-preproc-file-c">/*
 * DO NOT EDIT! This file is generated automatically!
 */

#include &lt;stdio.h&gt;	/* CPP SYMBOL */

#define SYMBOL		/* CPP SYMBOL */
#define SAF(x)		((x) * ((x) - 1))	/* CPP SYMBOL */
#define ORD(x)		CPP SYMBOL x

int a = SAF (1 + 1);	/* CPP */
int b = (2 + 2) * (2 + 2)	/* SAF_M4 Hello, world! */;	/* M4 */
char chr = 'x';
char foo[] = "Let's say: 'Hello, world!'";
char bar[] = "ORD_M4 'Hello, world!' (args, are, ignored)";

static void define (char *s) { puts(s);}
static void ifelse (char *s) { puts(s);}

int main(void)
{

#ifdef SYMBOL			/* SYMBOL */
	puts("`Hello, world!'");	/* note: LQ()SYMBOL */
#endif

	define (foo);		/* Hello, world! */
	ifelse (bar);		/* Hello, world! */

	return 0;
}</pre><code><span title="2020-01-06 16:21:10 +0100">b53eafe</span><a href="../preproc/preproc.file.c" title="localhost:~/preproc/preproc.file.c">preproc.file.c</a><a href="#m4-preproc-preproc-file-c">ğŸ”—</a></code></div>
<h3 id="m4-ba-css-vlozeni-souboru-komentar" class="m4-ch"><a href="#m4-toc-ba-css-vlozeni-souboru-komentar" title="Obsah">â˜°</a><a href="#m4-ba-css-vlozeni-souboru-komentar" title="ğŸ”—">B.2</a><code>`'</code> CSS â€“ vloÅ¾enÃ­ souboru, komentÃ¡Å™<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h3>
<p>CSS pouÅ¾Ã­vÃ¡ znak <code>#</code> pro kÃ³dy barev, coÅ¾ je takÃ© zaÄÃ¡tek jednoÅ™Ã¡dkovÃ©ho M4 komentÃ¡Å™e.
KlÃ­ÄovÃ© slovo <code>changecom(/*,*/)</code> nastavÃ­ vÃ­ceÅ™Ã¡dkovÃ½ komentÃ¡Å™ <code>/* â€¦ */</code> a&nbsp;pÅ™epÃ­Å¡e se na <abbr title="epsilon â€“ prÃ¡zdnÃ½ symbol"><code>Îµ</code></abbr>.
KomentÃ¡Å™e se vypÃ­najÃ­ stejnÃ½m klÃ­ÄovÃ½m slovem <code>changecom</code> bez parametrÅ¯.</p>
<div class="m4-src"><pre id="m4-preproc-foo-css" title="soubor vloÅ¾enÃ½ makro procesorem">.foo {
	border: WIDTH 2px 1px;
}</pre><code><span title="2020-02-11 02:32:35 +0100">9e13656</span><a href="../preproc/foo.css" title="localhost:~/preproc/foo.css">foo.css</a><a href="#m4-preproc-foo-css">ğŸ”—</a></code></div>
<div class="m4-src"><pre id="m4-preproc-file-css-m4"># CSS preprocessor

define(`WIDTH', `3px')
define(`TOP', `#f00')
define(`SIDES', `#0f0')
define(`BOTTOM', `#00f')
define(`SITE', `www.root.cz')
define(`IMAGE', `m4tux.png')
define(`PATH', `https://SITE/IMAGE')

divert(0)dnl</pre><code><span title="2020-02-11 02:32:35 +0100">9e13656</span><a href="../preproc/file.css.m4" title="localhost:~/preproc/file.css.m4">file.css.m4</a><a href="#m4-preproc-file-css-m4">ğŸ”—</a></code></div>
<div class="m4-src"><pre id="m4-preproc-file-css">/* DONTE() */changecom(/*,*/)
/* DONTE() */

include(`foo.css')dnl

.bar {
	border-width: WIDTH;
	border-color: TOP SIDES BOTTOM; 
	background-image: url('PATH');
}

/* DONTE() */
changecom/* DONTE() */changecom(/*,*/)</pre><code><span title="2020-02-11 02:32:35 +0100">9e13656</span><a href="../preproc/file.css" title="localhost:~/preproc/file.css">file.css</a><a href="#m4-preproc-file-css">ğŸ”—</a></code></div>
<div title="pÅ™Ã­kaz" class="m4-usc">m4 -DSYMBOL='Hello, world!' <a href="../gfiles/rootq.m4" title="localhost:~/gfiles/rootq.m4">rootq.m4</a> <a href="../preproc/file.css.m4" title="localhost:~/preproc/file.css.m4">file.css.m4</a> <a href="../preproc/file.css" title="localhost:~/preproc/file.css">file.css</a> &gt; <a href="../preproc/preproc.file.css" title="localhost:~/preproc/preproc.file.css">preproc.file.css</a></div>
<div class="m4-src"><pre id="m4-preproc-preproc-file-css">/* DO NOT EDIT! This file is generated automatically! */
/* DONTE() */

.foo {
	border: 3px 2px 1px;
}

.bar {
	border-width: 3px;
	border-color: #f00 #0f0 #00f; 
	background-image: url('https://www.root.cz/m4tux.png');
}

/* DONTE() */
/* DO NOT EDIT! This file is generated automatically! */</pre><code><span title="2020-02-11 02:32:35 +0100">9e13656</span><a href="../preproc/preproc.file.css" title="localhost:~/preproc/preproc.file.css">preproc.file.css</a><a href="#m4-preproc-preproc-file-css">ğŸ”—</a></code></div>
<h3 id="m4-bash-netisknutelne-znaky" class="m4-ch"><a href="#m4-toc-bash-netisknutelne-znaky" title="Obsah">â˜°</a><a href="#m4-bash-netisknutelne-znaky" title="ğŸ”—">B.3</a><strong><code>â‚â†</code></strong> Bash â€“ netisknutelnÃ© znaky<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h3>
<p>Bash pouÅ¾Ã­vÃ¡ oba znaky, <code>`</code> a <code>[</code>.
Nechceme-li je skrÃ½vat do makra <code>LQ()</code> nebo <code>LB()</code>, mÅ¯Å¾eme pouÅ¾Ã­t pro <a href="#m4-rizeni-expanze-neterminalu" title="Å˜Ã­zenÃ­ expanze neterminÃ¡lÅ¯">Å™Ã­zenÃ­ expanze neterminÃ¡lÅ¯</a> netisknutelnÃ© znaky, viz. pÅ™Ã­klad:</p>
<div class="m4-src"><pre id="m4-preproc-file-sh-m4"># vim:mps+=â‚\:â†

# A â†’ Î²
define(â‚LEFTâ†, â‚$â‚#â†â†)
define(â‚OPâ†, â‚-eqâ†)
define(â‚RIGHTâ†, â‚0â†)

divert(0)dnl</pre><code><span title="2020-01-06 16:21:10 +0100">b53eafe</span><a href="../preproc/file.sh.m4" title="localhost:~/preproc/file.sh.m4">file.sh.m4</a><a href="#m4-preproc-file-sh-m4">ğŸ”—</a></code></div>
<div class="m4-src"><pre id="m4-preproc-file-sh">#!/bin/bash
#
â‚#â† DONTE()

HELLO=`echo 'SYMBOL'`

if [[ LEFT OP RIGHT ]]
then
	echo $HELLO
fi</pre><code><span title="2020-01-06 16:21:10 +0100">b53eafe</span><a href="../preproc/file.sh" title="localhost:~/preproc/file.sh">file.sh</a><a href="#m4-preproc-file-sh">ğŸ”—</a></code></div>
<div title="pÅ™Ã­kaz" class="m4-usc">m4 -DSYMBOL='Hello, world!' <a href="../gfiles/rootn.m4" title="localhost:~/gfiles/rootn.m4">rootn.m4</a> <a href="../preproc/file.sh.m4" title="localhost:~/preproc/file.sh.m4">file.sh.m4</a> <a href="../preproc/file.sh" title="localhost:~/preproc/file.sh">file.sh</a> &gt; <a href="../preproc/preproc.file.sh" title="localhost:~/preproc/preproc.file.sh">preproc.file.sh</a></div>
<div class="m4-src"><pre id="m4-preproc-preproc-file-sh">#!/bin/bash
#
# DO NOT EDIT! This file is generated automatically!

HELLO=`echo 'Hello, world!'`

if [[ $# -eq 0 ]]
then
	echo $HELLO
fi</pre><code><span title="2020-01-06 16:21:10 +0100">b53eafe</span><a href="../preproc/preproc.file.sh" title="localhost:~/preproc/preproc.file.sh">preproc.file.sh</a><a href="#m4-preproc-preproc-file-sh">ğŸ”—</a></code></div>
<h2 id="m4-m4-priklady" class="m4-ch"><a href="#m4-toc-m4-priklady" title="Obsah">â˜°</a><a href="#m4-m4-priklady" title="ğŸ”—">C</a>M4 â€“ pÅ™Ã­klady<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h2>
<div title="pro informaci" class="rs-tip-major m4-info">Znaky {<code>`'</code>, <code>[]</code>, <strong><code>â‚â†</code></strong>, <code>âŸ¦âŸ§</code>} v&nbsp;nÃ¡zvu pÅ™Ã­kladu <a href="#m4-rizeni-expanze-neterminalu" title="Å˜Ã­zenÃ­ expanze neterminÃ¡lÅ¯">Å™Ã­dÃ­ expanzi neterminÃ¡lÅ¯</a>.</div>
<p id="m4-toc-json-leva-zavorka-b" class="m4-l2"><a href="#m4-json-leva-zavorka-b"><b>C.1</b><code>[]</code> JSON â€“ levÃ¡ zÃ¡vorka <code>[</code></a></p>
<p id="m4-toc-bash-pocitadla" class="m4-l2"><a href="#m4-bash-pocitadla"><b>C.2</b><code>[]</code> Bash â€“ poÄÃ­tadla</a></p>
<p id="m4-toc-h-zavorky-h-dnl" class="m4-l2"><a href="#m4-h-zavorky-h-dnl"><b>C.3</b><code>[]</code> .h â€“ zÃ¡vorky <code>[]</code>, <code>[,]</code>, <code>[#]</code>, <code>[dnl]</code></a></p>
<p id="m4-toc-awk-priklady-bezpecnejsich-maker" class="m4-l2"><a href="#m4-awk-priklady-bezpecnejsich-maker"><b>C.4</b><code>[]</code> AWK â€“ pÅ™Ã­klady bezpeÄnÄ›jÅ¡Ã­ch maker</a></p>
<h3 id="m4-json-leva-zavorka-b" class="m4-ch"><a href="#m4-toc-json-leva-zavorka-b" title="Obsah">â˜°</a><a href="#m4-json-leva-zavorka-b" title="ğŸ”—">C.1</a><code>[]</code> JSON â€“ levÃ¡ zÃ¡vorka <code>[</code><sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h3>
<p>UvnitÅ™ hranatÃ½ch zÃ¡vorek <code>[â€¦ se neterminÃ¡ly neexpandujÃ­ â€¦]</code>.
Proto je levÃ¡ hranatÃ¡ zÃ¡vorka <code>[</code> nahrazena makrem <code>LB()</code> z&nbsp;koÅ™enovÃ©ho souboru.</p>
<div class="m4-src"><pre id="m4-hello-world-json-m4"># JSON

divert(0)dnl
{"foo": {
	"_comment": "DONTE()",
	"bar": LB()
		{"baz": "SYMBOL"}
	]
}}</pre><code><span title="2020-01-06 16:21:10 +0100">b53eafe</span><a href="../hello_world/json.m4" title="localhost:~/hello_world/json.m4">json.m4</a><a href="#m4-hello-world-json-m4">ğŸ”—</a></code></div>
<div title="pÅ™Ã­kaz" class="m4-usc">m4 -DSYMBOL='Hello, world!' <a href="../gfiles/rootb.m4" title="localhost:~/gfiles/rootb.m4">rootb.m4</a> <a href="../hello_world/json.m4" title="localhost:~/hello_world/json.m4">json.m4</a> &gt; <a href="../hello_world/hello_world.json" title="localhost:~/hello_world/hello_world.json">hello_world.json</a></div>
<div class="m4-src"><pre id="m4-hello-world-hello-world-json">{"foo": {
	"_comment": "DO NOT EDIT! This file is generated automatically!",
	"bar": [
		{"baz": "Hello, world!"}
	]
}}</pre><code><span title="2020-01-06 16:21:10 +0100">b53eafe</span><a href="../hello_world/hello_world.json" title="localhost:~/hello_world/hello_world.json">hello_world.json</a><a href="#m4-hello-world-hello-world-json">ğŸ”—</a></code></div>
<h3 id="m4-bash-pocitadla" class="m4-ch"><a href="#m4-toc-bash-pocitadla" title="Obsah">â˜°</a><a href="#m4-bash-pocitadla" title="ğŸ”—">C.2</a><code>[]</code> Bash â€“ poÄÃ­tadla<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h3>
<p>PoÄÃ­tadla <code>COUNT_UP</code> a&nbsp;<code>COUNT_DOWN</code> jsou definovÃ¡na v&nbsp;koÅ™enovÃ©m souboru.
NeterminÃ¡ly<br><code>[â€¦ uvnitÅ™ zÃ¡vorek â€¦]</code> nebudou expandovÃ¡ny, pouze se odeberou vnÄ›jÅ¡Ã­ zÃ¡vorky.
Nutno pouÅ¾Ã­t makro <code>LB()</code> z&nbsp;koÅ™enovÃ©ho souboru.</p>
<div class="m4-src"><pre id="m4-hello-world-sh-m4"># A â†’ Î²
define([LEFT], [$[#]])
define([OP], [-eq])
define([RIGHT], [0])

# define two counters
# A â†’ Î²
define([__COUNTUP__], defn([COUNT_UP]))
define([__COUNTDN__], defn([COUNT_DOWN]))

# init counters
__COUNTUP__(10)
__COUNTDN__(10)

divert(0)dnl
#!/bin/bash
#
[#] DONTE()

if [ LEFT OP RIGHT ]
then
	echo '__COUNTUP__] SYMBOL LB()__COUNTDN__'
fi

if test LEFT OP RIGHT
then
	echo '__COUNTUP__] SYMBOL LB()__COUNTDN__'
fi

if LB()LB() LEFT OP RIGHT ]]
then
	echo '__COUNTUP__] SYMBOL LB()__COUNTDN__'
fi</pre><code><span title="2020-01-06 16:21:10 +0100">b53eafe</span><a href="../hello_world/sh.m4" title="localhost:~/hello_world/sh.m4">sh.m4</a><a href="#m4-hello-world-sh-m4">ğŸ”—</a></code></div>
<div title="pÅ™Ã­kaz" class="m4-usc">m4 -DSYMBOL='Hello, world!' <a href="../gfiles/rootb.m4" title="localhost:~/gfiles/rootb.m4">rootb.m4</a> <a href="../hello_world/sh.m4" title="localhost:~/hello_world/sh.m4">sh.m4</a> &gt; <a href="../hello_world/hello_world.sh" title="localhost:~/hello_world/hello_world.sh">hello_world.sh</a></div>
<div class="m4-src"><pre id="m4-hello-world-hello-world-sh">#!/bin/bash
#
# DO NOT EDIT! This file is generated automatically!

if  LEFT OP RIGHT 
then
	echo '10] Hello, world! [10'
fi

if test $# -eq 0
then
	echo '11] Hello, world! [9'
fi

if [[ $# -eq 0 ]]
then
	echo '12] Hello, world! [8'
fi</pre><code><span title="2020-01-06 16:21:10 +0100">b53eafe</span><a href="../hello_world/hello_world.sh" title="localhost:~/hello_world/hello_world.sh">hello_world.sh</a><a href="#m4-hello-world-hello-world-sh">ğŸ”—</a></code></div>
<h3 id="m4-h-zavorky-h-dnl" class="m4-ch"><a href="#m4-toc-h-zavorky-h-dnl" title="Obsah">â˜°</a><a href="#m4-h-zavorky-h-dnl" title="ğŸ”—">C.3</a><code>[]</code> .h â€“ zÃ¡vorky <code>[]</code>, <code>[,]</code>, <code>[#]</code>, <code>[dnl]</code><sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h3>
<p>PrÃ¡zdnÃ½ pÃ¡r <code>[]</code> (nebo prÃ¡zdnÃ½ symbol v&nbsp;zÃ¡vorkÃ¡ch <code>[Îµ]</code>) slouÅ¾Ã­ jako oddÄ›lovaÄ symbolÅ¯.
ZÃ¡vorky kolem znaku komentÃ¡Å™e <code>[#]</code> vypnou jeho pÅ¯vodnÃ­ vÃ½znam, stejnÄ› jako vypnou vÃ½znam <em>silnÄ›jÅ¡Ã­ho</em> M4 komentÃ¡Å™e <code>[dnl]</code>.
Vypnou takÃ© pÅ¯vodnÃ­ vÃ½znam ÄÃ¡rky <code>[,]</code> jako oddÄ›lovaÄe argumentÅ¯ maker.
Tyto symboly se stanou obyÄejnÃ½mi terminÃ¡lnÃ­mi symboly bez jakÃ©hokoliv vedlejÅ¡Ã­ho efektu.</p>
<div class="m4-src"><pre id="m4-hello-world-h-m4"># A â†’ Î²
define([HELLO], [HELLO_WORLD])

divert(0)dnl
/*
 * [dnl] DONTE()
 */

[#]ifndef __[]HELLO[]_H
[#]define __[]HELLO[]_H

[#]define HELLO	SYMBOL

[#]endif /* __[]HELLO[]_H */</pre><code><span title="2020-02-13 14:50:23 +0100">ce5cd99</span><a href="../hello_world/h.m4" title="localhost:~/hello_world/h.m4">h.m4</a><a href="#m4-hello-world-h-m4">ğŸ”—</a></code></div>
<div title="pÅ™Ã­kaz" class="m4-usc">m4 -DSYMBOL='Hello, world!' <a href="../gfiles/rootb.m4" title="localhost:~/gfiles/rootb.m4">rootb.m4</a> <a href="../hello_world/h.m4" title="localhost:~/hello_world/h.m4">h.m4</a> &gt; <a href="../hello_world/hello_world.h" title="localhost:~/hello_world/hello_world.h">hello_world.h</a></div>
<div class="m4-src"><pre id="m4-hello-world-hello-world-h">/*
 * dnl DO NOT EDIT! This file is generated automatically!
 */

#ifndef __HELLO_WORLD_H
#define __HELLO_WORLD_H

#define HELLO_WORLD	Hello, world!

#endif /* __HELLO_WORLD_H */</pre><code><span title="2020-02-13 14:51:13 +0100">6b10c6c</span><a href="../hello_world/hello_world.h" title="localhost:~/hello_world/hello_world.h">hello_world.h</a><a href="#m4-hello-world-hello-world-h">ğŸ”—</a></code></div>
<h3 id="m4-awk-priklady-bezpecnejsich-maker" class="m4-ch"><a href="#m4-toc-awk-priklady-bezpecnejsich-maker" title="Obsah">â˜°</a><a href="#m4-awk-priklady-bezpecnejsich-maker" title="ğŸ”—">C.4</a><code>[]</code> AWK â€“ pÅ™Ã­klady bezpeÄnÄ›jÅ¡Ã­ch maker<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h3>
<p>UniverzÃ¡lnÃ­ vÃ½straha <code>DONTE</code> se ignoruje bez zÃ¡vorek, stejnÄ› jako <code>LB</code>, <code>RB</code>, â€¦
TakovÃ¡ makra explicitnÄ› vytvÃ¡Å™Ã­ vÃ½vojÃ¡Å™ skriptÅ¯, prohlÃ©dnÄ›te si koÅ™enovÃ½ soubor.</p>
<div class="m4-src"><pre id="m4-hello-world-awk-m4"># AWK

divert(0)dnl
#!/bin/awk -f
#
[# DONTE()] ---&gt; "DONTE()"

BEGIN { print "DONTE[]() LB () LB() SYMBOL ]" }</pre><code><span title="2020-01-06 23:32:45 +0100">3a8a5dd</span><a href="../hello_world/awk.m4" title="localhost:~/hello_world/awk.m4">awk.m4</a><a href="#m4-hello-world-awk-m4">ğŸ”—</a></code></div>
<div title="pÅ™Ã­kaz" class="m4-usc">m4 -DSYMBOL='Hello, world!' <a href="../gfiles/rootb.m4" title="localhost:~/gfiles/rootb.m4">rootb.m4</a> <a href="../hello_world/awk.m4" title="localhost:~/hello_world/awk.m4">awk.m4</a> &gt; <a href="../hello_world/hello_world.awk" title="localhost:~/hello_world/hello_world.awk">hello_world.awk</a></div>
<div class="m4-src"><pre id="m4-hello-world-hello-world-awk">#!/bin/awk -f
#
# DONTE() ---&gt; "DO NOT EDIT! This file is generated automatically!"

BEGIN { print "DONTE() LB () [ Hello, world! ]" }</pre><code><span title="2020-01-06 23:32:45 +0100">3a8a5dd</span><a href="../hello_world/hello_world.awk" title="localhost:~/hello_world/hello_world.awk">hello_world.awk</a><a href="#m4-hello-world-hello-world-awk">ğŸ”—</a></code></div>
<h2 id="m4-proc-pouzivat-m4-a-proc-ne" class="m4-ch"><a href="#m4-toc-proc-pouzivat-m4-a-proc-ne" title="Obsah">â˜°</a><a href="#m4-proc-pouzivat-m4-a-proc-ne" title="ğŸ”—">D</a>ProÄ pouÅ¾Ã­vat M4 a&nbsp;proÄ ne?<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h2>
<p id="m4-toc-proc-generovat-kod-v-m4" class="m4-l2"><a href="#m4-proc-generovat-kod-v-m4"><b>D.1</b><code>ğŸ‘</code> ProÄ generovat kÃ³d v&nbsp;M4</a></p>
<p id="m4-toc-proc-se-vyhnout-m4" class="m4-l2"><a href="#m4-proc-se-vyhnout-m4"><b>D.2</b><code>ğŸ‘</code> ProÄ se vyhnout M4</a></p>
<h3 id="m4-proc-generovat-kod-v-m4" class="m4-ch"><a href="#m4-toc-proc-generovat-kod-v-m4" title="Obsah">â˜°</a><a href="#m4-proc-generovat-kod-v-m4" title="ğŸ”—">D.1</a><code>ğŸ‘</code> ProÄ generovat kÃ³d v&nbsp;M4<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h3>
<ul>
<li id="m4-direct-use-of-cfg">pÅ™Ã­mÃ© pouÅ¾itÃ­ <a href="#m4-bezkontextova-gramatika" title="BezkontextovÃ¡ gramatika">bezkontextovÃ© gramatiky</a> (rekurze zdarma)
<ul><li>pro transformaci dat staÄÃ­ napsat minimum M4 kÃ³du</li></ul></li>
<li id="m4-direct-use-of-atm">pÅ™Ã­mÃ© pouÅ¾itÃ­ automatÅ¯
<ul><li>moÅ¾nost vymodelovat si potÅ™ebnÃ© algoritmy (M4 nepotÅ™ebuje verze)</li></ul></li>
<li id="m4-direct-use-of-stacks">pÅ™Ã­mÃ© pouÅ¾itÃ­ zÃ¡sobnÃ­kÅ¯
<ul><li>zÃ¡sobnÃ­ky propojenÃ© s&nbsp;automaty rozÅ¡iÅ™ujÃ­ moÅ¾nosti generÃ¡toru kÃ³du</li></ul></li>
<li id="m4-direct-use-of-queues">pÅ™Ã­mÃ© pouÅ¾itÃ­ vÃ½stupnÃ­ch front pro doÄasnÃ© uloÅ¾enÃ­ vÃ½slednÃ½ch ÄÃ¡stÃ­ kÃ³du
<ul><li>jednotlivÃ© fronty jsou na zÃ¡vÄ›r vypsÃ¡ny na vÃ½stup ve vzestupnÃ©m poÅ™adÃ­</li></ul></li>
<li id="m4-significantly-faster-code-gener">vÃ½raznÄ› vyÅ¡Å¡Ã­ rychlost generovÃ¡nÃ­ kÃ³du (ve srovnÃ¡nÃ­ s&nbsp;XSLT)
<ul><li>nÃ­zkÃ© nÃ¡roky na vÃ½poÄetnÃ­ zdroje</li></ul></li>
</ul>
<h3 id="m4-proc-se-vyhnout-m4" class="m4-ch"><a href="#m4-toc-proc-se-vyhnout-m4" title="Obsah">â˜°</a><a href="#m4-proc-se-vyhnout-m4" title="ğŸ”—">D.2</a><code>ğŸ‘</code> ProÄ se vyhnout M4<sup><a href="#m4-toc" title="Nahoru">ğŸ¡…</a></sup></h3>
<ul>
<li id="m4-low-level-language">univerzÃ¡lnÃ­ jazyk nÃ­zkÃ© ÃºrovnÄ› (podobnÄ› jako jazyk C)
<ul><li>nemÅ¯Å¾e konkurovat Ãºzce specializovanÃ½m jazykÅ¯m</li></ul></li>
<li id="m4-nearly-forgotten-language">pomÄ›rnÄ› malÃ¡ komunita vÃ½vojÃ¡Å™Å¯
<ul><li>M4 je tÃ©mÄ›Å™ zapomenutÃ½ jazyk, mÃ¡lo existujÃ­cÃ­ch projektÅ¯</li></ul></li>
<li id="m4-unusual-language">neobvyklÃ© programovacÃ­ paradigma vyÅ¾adujÃ­cÃ­ splnÄ›nÃ­ <a href="#m4-predpoklady-pro-zvladnuti-m4" title="PÅ™edpoklady pro zvlÃ¡dnutÃ­ M4">nÄ›kolika pÅ™edpokladÅ¯</a>
<ul><li>M4 je kvÅ¯li nutnÃ½m pÅ™edpokladÅ¯m nÃ¡roÄnÃ½ jazyk</li></ul></li>
<li id="m4-experience-dependent">produktivita znaÄnÄ› zÃ¡visÃ­ na zkuÅ¡enostech (moÅ¾nÃ½ problÃ©m s&nbsp;termÃ­ny)
<ul><li>schopnost myslet v&nbsp;M4/<abbr title="Context-Free Grammar â€“ bezkontextovÃ¡ gramatika">CFG</abbr> je nutnost</li></ul></li>
<li id="m4-maintenance-could-be-hard">ÃºdrÅ¾ba Å¡patnÄ› napsanÃ©ho M4 kÃ³du nenÃ­ jednoduchÃ¡
<ul><li>existujÃ­cÃ­ M4 kÃ³d je snadnÃ© promÄ›nit ve zmatek (nutnÃ½ dohled!)</li></ul></li>
</ul>
<script>var m4_w=document.getElementsByClassName("m4-hg"),m4_p=document.getElementsByTagName("pre"),m4_a=[];for(var e of m4_w){var c=e.dataset.id;if(c){if(!m4_a[c])m4_a[c]=[];m4_a[c].push(e)}}for(var d of m4_p){var a,b=d.parentElement,m=d.innerHTML.split('\n').length,n=document.createElement("ol");for(var i=0;i<m;i++)n.appendChild(document.createElement("li"));if(a=m4_a[d.id]){for(var e of a){var k=e.dataset.ln.split(','),l=n.childNodes,h=[];for(var f of k)h.push(l[f-1]);e.onmouseover=(function(g){return function(){for(var f of g)f.style.backgroundColor='red'}})(h);e.onmouseout=(function(g){return function(){for(var f of g)f.style=null}})(h)}}b.insertBefore(n,d)}</script>
</div>
</body>
</html>
